<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://fixie.ai/python-client-api/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Python Client API - Fixie Developer Portal</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../assets/_mkdocstrings.css" rel="stylesheet" />
        <link href="../css/custom.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Python Client API";
        var mkdocs_page_input_path = "python-client-api.md";
        var mkdocs_page_url = "/python-client-api/";
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script>
<script
async
src="https://www.googletagmanager.com/gtag/js?id=G-T4VHHYL14W"
></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());
  
  gtag("config", "G-T4VHHYL14W");
  </script>
<script>
(function(apiKey){
    (function(p,e,n,d,o){var v,w,x,y,z;o=p[d]=p[d]||{};o._q=o._q||[];
    v=['initialize','identify','updateOptions','pageLoad','track'];for(w=0,x=v.length;w<x;++w)(function(m){
        o[m]=o[m]||function(){o._q[m===v[0]?'unshift':'push']([m].concat([].slice.call(arguments,0)));};})(v[w]);
        y=e.createElement(n);y.async=!0;y.src='https://cdn.pendo.io/agent/static/'+apiKey+'/pendo.js';
        z=e.getElementsByTagName(n)[0];z.parentNode.insertBefore(y,z);})(window,document,'script','pendo');
})('6180bd3c-4b13-420f-6928-e46f13dabb77');
</script>
<script type="text/javascript">
  (function(f,b){if(!b.__SV){var e,g,i,h;window.mixpanel=b;b._i=[];b.init=function(e,f,c){function g(a,d){var b=d.split(".");2==b.length&&(a=a[b[0]],d=b[1]);a[d]=function(){a.push([d].concat(Array.prototype.slice.call(arguments,0)))}}var a=b;"undefined"!==typeof c?a=b[c]=[]:c="mixpanel";a.people=a.people||[];a.toString=function(a){var d="mixpanel";"mixpanel"!==c&&(d+="."+c);a||(d+=" (stub)");return d};a.people.toString=function(){return a.toString(1)+".people (stub)"};i="disable time_event track track_pageview track_links track_forms track_with_groups add_group set_group remove_group register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking start_batch_senders people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user people.remove".split(" ");
  for(h=0;h<i.length;h++)g(a,i[h]);var j="set set_once union unset remove delete".split(" ");a.get_group=function(){function b(c){d[c]=function(){call2_args=arguments;call2=[c].concat(Array.prototype.slice.call(call2_args,0));a.push([e,call2])}}for(var d={},e=["get_group"].concat(Array.prototype.slice.call(arguments,0)),c=0;c<j.length;c++)b(j[c]);return d};b._i.push([e,f,c])};b.__SV=1.2;e=f.createElement("script");e.type="text/javascript";e.async=!0;e.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?
  MIXPANEL_CUSTOM_LIB_URL:"file:"===f.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";g=f.getElementsByTagName("script")[0];g.parentNode.insertBefore(e,g)}})(document,window.mixpanel||[]);
  </script>
<script type="text/javascript">
  window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src="https://cdn.heapanalytics.com/js/heap-"+e+".js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(r,a);for(var n=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","resetIdentity","removeEventProperty","setEventProperties","track","unsetEventProperty"],o=0;o<p.length;o++)heap[p[o]]=n(p[o])};
  heap.load("2470912105");
</script>

<script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/24456200.js"></script>

<script>
  (function(h,o,u,n,d) {
     h=h[d]=h[d]||{q:[],onReady:function(c){h.q.push(c)}}
     d=o.createElement(u);d.async=1;d.src=n
     n=o.getElementsByTagName(u)[0];n.parentNode.insertBefore(d,n)
  })(window,document,'script','https://www.datadoghq-browser-agent.com/us1/v4/datadog-rum.js','DD_RUM')
  window.DD_RUM.onReady(function() {
    window.DD_RUM.init({
      applicationId: 'c3ef95f4-ab34-4aff-9f26-ed6bb5734d7b',
      clientToken: 'pub2e9329101f46c60b6b7bed60bf7c5888',
      site: 'datadoghq.com',
      service: 'fixie---web',
      env: 'docs',
      version: 'docs',
      sessionSampleRate: 100,
      sessionReplaySampleRate: 20,
      trackUserInteractions: true,
      trackResources: true,
      trackLongTasks: true,
      defaultPrivacyLevel: 'mask-user-input',
    })
  })
</script>

<script>
mixpanel.init('d695f343799edd2d62beb38eea46b4fc', { debug: true });
window.pendo.initialize();
</script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="..">
          <img src="../assets/fixie-logo-docs.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Introduction</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../architecture/">Architecture</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Building Fixie Agents</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../agent-quickstart/">Agent QuickStart</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../agents/">Fixie Agent API</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../agent-protocol/">Agent Protocol</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Common Use Cases</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../document-qa/">Document Question and Answering</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../langchain/">Using Langchain</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Python SDK</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Python Client API</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#fixieai.client.client">fixieai.client.client</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fixieai.client.client.FixieClient">FixieClient</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.client.FixieClient.gqlclient">gqlclient</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.client.FixieClient.url">url</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.client.FixieClient.create_agent">create_agent()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.client.FixieClient.create_agent_revision">create_agent_revision()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.client.FixieClient.create_session">create_session()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.client.FixieClient.delete_agent_revision">delete_agent_revision()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.client.FixieClient.deploy_agent">deploy_agent()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.client.FixieClient.get_agent">get_agent()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.client.FixieClient.get_agent_page_url">get_agent_page_url()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.client.FixieClient.get_agents">get_agents()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.client.FixieClient.get_current_agent_revision">get_current_agent_revision()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.client.FixieClient.get_current_user">get_current_user()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.client.FixieClient.get_current_username">get_current_username()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.client.FixieClient.get_session">get_session()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.client.FixieClient.get_sessions">get_sessions()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.client.FixieClient.post">post()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.client.FixieClient.refresh_agent">refresh_agent()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.client.FixieClient.set_current_agent_revision">set_current_agent_revision()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.client.FixieClient.streaming_post">streaming_post()</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fixieai.client.client.get_agents">get_agents()</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fixieai.client.client.get_client">get_client()</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fixieai.client.client.get_embeds">get_embeds()</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fixieai.client.client.get_session">get_session()</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fixieai.client.client.query">query()</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fixieai.client.session">fixieai.client.session</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fixieai.client.session.Session">Session</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.session.Session.frontend_agent_id">frontend_agent_id</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.session.Session.session_id">session_id</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.session.Session.session_url">session_url</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.session.Session.delete_session">delete_session()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.session.Session.get_embeds">get_embeds()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.session.Session.get_messages">get_messages()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.session.Session.get_metadata">get_metadata()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.session.Session.query">query()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.session.Session.streaming_query">streaming_query()</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fixieai.client.agent">fixieai.client.agent</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fixieai.client.agent.Agent">Agent</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.agent.Agent.agent_id">agent_id</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.agent.Agent.created">created</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.agent.Agent.description">description</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.agent.Agent.func_url">func_url</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.agent.Agent.handle">handle</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.agent.Agent.modified">modified</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.agent.Agent.more_info_url">more_info_url</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.agent.Agent.name">name</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.agent.Agent.owner">owner</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.agent.Agent.published">published</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.agent.Agent.queries">queries</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.agent.Agent.query_url">query_url</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.agent.Agent.valid">valid</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.agent.Agent.create_agent">create_agent()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.agent.Agent.delete_agent">delete_agent()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.agent.Agent.get_metadata">get_metadata()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.client.agent.Agent.update_agent">update_agent()</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fixieai.cli.cli">fixieai.cli.cli</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fixieai.cli.cli.fixie">fixie()</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fixieai.cli.session.console">fixieai.cli.session.console</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fixieai.cli.session.console.Console">Console</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#fixieai.cli.session.console.Console.run">run()</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../python-agent-api/">Python Agent API</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Command line interface</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../cli/">CLI</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">GraphQL API</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="https://app.fixie.ai/static/docs/index.html">GraphQL</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Other links</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="https://github.com/fixie-ai/fixie-sdk">GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://discord.gg/MsKAeKF8kU">Discord</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://twitter.com/fixieai">Twitter</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Fixie Developer Portal</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
          <li>Python SDK &raquo;</li>
      <li>Python Client API</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="fixie-client-python-api-reference">Fixie Client Python API Reference</h1>


<div class="doc doc-object doc-module">


<a id="fixieai.client.client"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="fixieai.client.client.FixieClient" class="doc doc-heading">
        <code>FixieClient</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>FixieClient is a client to the Fixie system.</p>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b>api_key</b>
                  (<code><span title="typing.Optional">Optional</span>[str]</code>)
              –
              <div class="doc-md-description">
                <p>The API key for the Fixie API server. If not provided, the
FIXIE_API_KEY environment variable will be used. If that is not
set, the authenticated user API key will be used, or a ValueError
will be raised if the user is not authenticated.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

        <details class="quote">
          <summary>Source code in <code>fixieai/client/client.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">FixieClient</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;FixieClient is a client to the Fixie system.</span>

<span class="sd">    Args:</span>
<span class="sd">        api_key: The API key for the Fixie API server. If not provided, the</span>
<span class="sd">            FIXIE_API_KEY environment variable will be used. If that is not</span>
<span class="sd">            set, the authenticated user API key will be used, or a ValueError</span>
<span class="sd">            will be raised if the user is not authenticated.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">api_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_api_key</span> <span class="o">=</span> <span class="n">api_key</span> <span class="ow">or</span> <span class="n">constants</span><span class="o">.</span><span class="n">fixie_api_key</span><span class="p">()</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Using Fixie API URL: </span><span class="si">{</span><span class="n">constants</span><span class="o">.</span><span class="n">FIXIE_API_URL</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_request_headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Authorization&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Bearer </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_api_key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">}</span>
        <span class="n">transport</span> <span class="o">=</span> <span class="n">RequestsHTTPTransport</span><span class="p">(</span>
            <span class="n">url</span><span class="o">=</span><span class="n">constants</span><span class="o">.</span><span class="n">FIXIE_GRAPHQL_URL</span><span class="p">,</span>
            <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_request_headers</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rest_client</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="n">transport</span><span class="o">=</span><span class="n">transport</span><span class="p">,</span> <span class="n">fetch_schema_from_transport</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">gqlclient</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Client</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the underlying GraphQL client used by this FixieClient.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the URL of the Fixie API server.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">constants</span><span class="o">.</span><span class="n">FIXIE_API_URL</span>

    <span class="k">def</span> <span class="nf">get_agents</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return metadata about all running Fixie Agents. The keys of the returned</span>
<span class="sd">        dictionary are the Agent handles, and the values are dictionaries containing</span>
<span class="sd">        metadata about each Agent.&quot;&quot;&quot;</span>

        <span class="n">query</span> <span class="o">=</span> <span class="n">gql</span><span class="p">(</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            query getAgents {</span>
<span class="sd">                allAgents {</span>
<span class="sd">                    agentId</span>
<span class="sd">                    name</span>
<span class="sd">                    description</span>
<span class="sd">                    moreInfoUrl</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
        <span class="k">assert</span> <span class="s2">&quot;allAgents&quot;</span> <span class="ow">in</span> <span class="n">result</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;allAgents&quot;</span><span class="p">],</span> <span class="nb">list</span><span class="p">)</span>
        <span class="n">agents</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;allAgents&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">agent</span><span class="p">[</span><span class="s2">&quot;agentId&quot;</span><span class="p">]:</span> <span class="n">agent</span> <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">agents</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">get_agent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Agent</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return an existing Agent object.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Agent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent_id</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_agent_page_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the URL of the Agent page on the Fixie Platform.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">constants</span><span class="o">.</span><span class="n">FIXIE_WEB_AGENT_URL</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">agent_id</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span> <span class="nf">create_agent</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">handle</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">query_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">func_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">more_info_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">published</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Agent</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new Agent.</span>

<span class="sd">        Args:</span>
<span class="sd">            handle: The handle for the new Agent. This must be unique across all</span>
<span class="sd">                Agents owned by this user.</span>
<span class="sd">            name: The name of the new Agent.</span>
<span class="sd">            description: A description of the new Agent.</span>
<span class="sd">            query_url: (deprecated) Unused.</span>
<span class="sd">            func_url: (deprecated) The URL of the new Agent&#39;s func endpoint.</span>
<span class="sd">            more_info_url: A URL with more information about the new Agent.</span>
<span class="sd">            published: Whether the new Agent should be published.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">agent</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_current_username</span><span class="p">()</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">handle</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">agent</span><span class="o">.</span><span class="n">create_agent</span><span class="p">(</span>
            <span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">query_url</span><span class="p">,</span> <span class="n">func_url</span><span class="p">,</span> <span class="n">more_info_url</span><span class="p">,</span> <span class="n">published</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">agent</span>

    <span class="k">def</span> <span class="nf">get_sessions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a list of all session IDs.&quot;&quot;&quot;</span>

        <span class="n">query</span> <span class="o">=</span> <span class="n">gql</span><span class="p">(</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            query getSessions {</span>
<span class="sd">                allSessions {</span>
<span class="sd">                    handle</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
        <span class="k">assert</span> <span class="s2">&quot;allSessions&quot;</span> <span class="ow">in</span> <span class="n">result</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;allSessions&quot;</span><span class="p">],</span> <span class="nb">list</span><span class="p">)</span>
        <span class="n">sessions</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;allSessions&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">session</span><span class="p">[</span><span class="s2">&quot;handle&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">session</span> <span class="ow">in</span> <span class="n">sessions</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">create_session</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frontend_agent_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Session</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new Session.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Session</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frontend_agent_id</span><span class="o">=</span><span class="n">frontend_agent_id</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_session</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">session_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Session</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return an existing Session object.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Session</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">session_id</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_current_user</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the user metadata of the current user.&quot;&quot;&quot;</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">gql</span><span class="p">(</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            query getUsername {</span>
<span class="sd">                user {</span>
<span class="sd">                    username</span>
<span class="sd">                    firstName</span>
<span class="sd">                    lastName</span>
<span class="sd">                    email</span>
<span class="sd">                    organization {</span>
<span class="sd">                        handle</span>
<span class="sd">                        name</span>
<span class="sd">                    }</span>
<span class="sd">                    dailyQueryLimit</span>
<span class="sd">                    dailyUsedQueries</span>
<span class="sd">                    avatar</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
        <span class="k">assert</span> <span class="s2">&quot;user&quot;</span> <span class="ow">in</span> <span class="n">result</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;user&quot;</span><span class="p">],</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;user&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_current_username</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the username of the current user.&quot;&quot;&quot;</span>
        <span class="n">user</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_user</span><span class="p">()</span>
        <span class="k">assert</span> <span class="s2">&quot;username&quot;</span> <span class="ow">in</span> <span class="n">user</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">user</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">],</span> <span class="nb">str</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">user</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">refresh_agent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent_handle</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Indicates that an agent&#39;s prompts should be refreshed.&quot;&quot;&quot;</span>
        <span class="n">username</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_username</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">constants</span><span class="o">.</span><span class="n">FIXIE_REFRESH_URL</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">agent_handle</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_agent_revision</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">handle</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">make_current</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">reindex_corpora</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">external_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">gzip_tarfile</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">BinaryIO</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">environment</span><span class="p">:</span> <span class="n">FixieEnvironment</span> <span class="o">=</span> <span class="n">FixieEnvironment</span><span class="o">.</span><span class="n">PYTHON</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a new Agent revision.</span>

<span class="sd">        Args:</span>
<span class="sd">            handle: The handle of the Agent. Must be owned by the current user.</span>
<span class="sd">            make_current: Whether the new revision should be made the current (active) revision.</span>
<span class="sd">            reindex_corpora: Whether to reindex all corpora for the new revision.</span>
<span class="sd">            metadata: Optional client-provided metadata to associate with the revision.</span>
<span class="sd">            external_url: The URL at which the revision is hosted, if hosted externally.</span>
<span class="sd">            gzip_tarfile: A file-like of a gzip-compressed tarfile containing the files to deploy.</span>
<span class="sd">            environment: The environment in which the revision should be run.</span>

<span class="sd">        Exactly one of `external_url` and `gzip_tarfile` must be provided.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">mutation</span> <span class="o">=</span> <span class="n">gql</span><span class="p">(</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            mutation CreateAgentRevision(</span>
<span class="sd">                $handle: String!,</span>
<span class="sd">                $metadata: [RevisionMetadataKeyValuePairInput!]!,</span>
<span class="sd">                $makeCurrent: Boolean!,</span>
<span class="sd">                $externalDeployment: ExternalDeploymentInput,</span>
<span class="sd">                $managedDeployment: ManagedDeploymentInput,</span>
<span class="sd">                $reindexCorpora: Boolean!,</span>
<span class="sd">            ) {</span>
<span class="sd">                createAgentRevision(agentHandle: $handle, makeCurrent: $makeCurrent, revision: { </span>
<span class="sd">                    metadata: $metadata</span>
<span class="sd">                    externalDeployment: $externalDeployment</span>
<span class="sd">                    managedDeployment: $managedDeployment</span>
<span class="sd">                }, reindexCorpora: $reindexCorpora) {</span>
<span class="sd">                    revision {</span>
<span class="sd">                        id</span>
<span class="sd">                    }</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">            &quot;&quot;&quot;</span>
        <span class="p">)</span>

        <span class="k">with</span> <span class="n">utils</span><span class="o">.</span><span class="n">patched_gql_file_uploader</span><span class="p">(</span>
            <span class="n">gzip_tarfile</span><span class="p">,</span> <span class="s2">&quot;upload.tar.gz&quot;</span><span class="p">,</span> <span class="s2">&quot;application/gzip&quot;</span>
        <span class="p">):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                <span class="n">mutation</span><span class="p">,</span>
                <span class="n">variable_values</span><span class="o">=</span><span class="p">{</span>
                    <span class="s2">&quot;handle&quot;</span><span class="p">:</span> <span class="n">handle</span><span class="p">,</span>
                    <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="p">{</span><span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="n">key</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">value</span><span class="p">}</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">metadata</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                    <span class="p">]</span>
                    <span class="k">if</span> <span class="n">metadata</span>
                    <span class="k">else</span> <span class="p">[],</span>
                    <span class="s2">&quot;makeCurrent&quot;</span><span class="p">:</span> <span class="n">make_current</span><span class="p">,</span>
                    <span class="s2">&quot;reindexCorpora&quot;</span><span class="p">:</span> <span class="n">reindex_corpora</span><span class="p">,</span>
                    <span class="s2">&quot;externalDeployment&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">external_url</span><span class="p">}</span>
                    <span class="k">if</span> <span class="n">external_url</span>
                    <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="s2">&quot;managedDeployment&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;environment&quot;</span><span class="p">:</span> <span class="n">environment</span><span class="p">,</span>
                        <span class="s2">&quot;codePackage&quot;</span><span class="p">:</span> <span class="n">gzip_tarfile</span><span class="p">,</span>
                    <span class="p">}</span>
                    <span class="k">if</span> <span class="n">gzip_tarfile</span>
                    <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="p">},</span>
                <span class="n">upload_files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="n">revision_id</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;createAgentRevision&quot;</span><span class="p">][</span><span class="s2">&quot;revision&quot;</span><span class="p">][</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">revision_id</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">revision_id</span>

    <span class="k">def</span> <span class="nf">get_current_agent_revision</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">handle</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the current (active) revision of an agent.&quot;&quot;&quot;</span>
        <span class="n">agent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_agent</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">gql</span><span class="p">(</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            query GetRevisionId($agentId: String!) {</span>
<span class="sd">                agentById(agentId: $agentId) {</span>
<span class="sd">                    currentRevision {</span>
<span class="sd">                        id</span>
<span class="sd">                    }</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">            &quot;&quot;&quot;</span>
        <span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="n">query</span><span class="p">,</span>
            <span class="n">variable_values</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;agentId&quot;</span><span class="p">:</span> <span class="n">agent</span><span class="o">.</span><span class="n">agent_id</span><span class="p">},</span>
        <span class="p">)</span>

        <span class="n">revision</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;agentById&quot;</span><span class="p">][</span><span class="s2">&quot;currentRevision&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">revision</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="n">revision</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">set_current_agent_revision</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">handle</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">revision_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the current (active) revision of an agent.&quot;&quot;&quot;</span>

        <span class="n">mutation</span> <span class="o">=</span> <span class="n">gql</span><span class="p">(</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            mutation SetCurrentAgentRevision(</span>
<span class="sd">                $handle: String!,</span>
<span class="sd">                $currentRevisionId: ID!) {</span>
<span class="sd">                updateAgent(</span>
<span class="sd">                    agentData: {</span>
<span class="sd">                        handle: $handle,</span>
<span class="sd">                        currentRevisionId: $currentRevisionId</span>
<span class="sd">                    }</span>
<span class="sd">                ) {</span>
<span class="sd">                    agent {</span>
<span class="sd">                        agentId</span>
<span class="sd">                    }</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">            &quot;&quot;&quot;</span>
        <span class="p">)</span>

        <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="n">mutation</span><span class="p">,</span>
            <span class="n">variable_values</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;handle&quot;</span><span class="p">:</span> <span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;currentRevisionId&quot;</span><span class="p">:</span> <span class="n">revision_id</span><span class="p">},</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">delete_agent_revision</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">handle</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">revision_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deletes an Agent revision.&quot;&quot;&quot;</span>

        <span class="n">mutation</span> <span class="o">=</span> <span class="n">gql</span><span class="p">(</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            mutation DeleteRevision($handle: String!, $revisionId: ID!) {</span>
<span class="sd">                deleteAgentRevision(agentHandle: $handle, revisionId: $revisionId) {</span>
<span class="sd">                    agent {</span>
<span class="sd">                        agentId</span>
<span class="sd">                    }</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">            &quot;&quot;&quot;</span>
        <span class="p">)</span>
        <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="n">mutation</span><span class="p">,</span> <span class="n">variable_values</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;handle&quot;</span><span class="p">:</span> <span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;revisionId&quot;</span><span class="p">:</span> <span class="n">revision_id</span><span class="p">}</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">deploy_agent</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">handle</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">gzip_tarfile</span><span class="p">:</span> <span class="n">BinaryIO</span><span class="p">,</span> <span class="n">environment</span><span class="p">:</span> <span class="n">FixieEnvironment</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deploys an agent implementation.</span>

<span class="sd">        Args:</span>
<span class="sd">            handle: The handle of the Agent to deploy. Must be owned by the current user.</span>
<span class="sd">            gzip_tarfile: A file-like of a gzip-compressed tarfile containing the files to deploy.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_agent_revision</span><span class="p">(</span>
            <span class="n">handle</span><span class="p">,</span>
            <span class="n">make_current</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">gzip_tarfile</span><span class="o">=</span><span class="n">gzip_tarfile</span><span class="p">,</span>
            <span class="n">environment</span><span class="o">=</span><span class="n">environment</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Performs a POST request with the appropriate auth token.</span>
<span class="sd">        The response will be parsed as JSON and returned.</span>

<span class="sd">        Args:</span>
<span class="sd">            url: The URL to POST to, which should start with https://api.fixie.ai/api</span>
<span class="sd">            data: The data to send in the request body (optional)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="n">url</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">constants</span><span class="o">.</span><span class="n">FIXIE_API_URL</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rest_client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_request_headers</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
        <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">streaming_post</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Performs a POST request with the appropriate auth token, and handles a streaming response.</span>
<span class="sd">        The response will be yielded as a generator of JSON objects, one per line.</span>

<span class="sd">        Args:</span>
<span class="sd">            url: The URL to POST to, which should start with https://api.fixie.ai/api</span>
<span class="sd">            data: The data to send in the request body (optional)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="n">url</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">constants</span><span class="o">.</span><span class="n">FIXIE_API_URL</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rest_client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
            <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_request_headers</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>
        <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">iter_lines</span><span class="p">()</span> <span class="k">if</span> <span class="n">line</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="fixieai.client.client.FixieClient.gqlclient" class="doc doc-heading">
<code class="highlight language-python"><span class="n">gqlclient</span><span class="p">:</span> <span class="n">Client</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the underlying GraphQL client used by this FixieClient.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="fixieai.client.client.FixieClient.url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">url</span><span class="p">:</span> <span class="nb">str</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the URL of the Fixie API server.</p>
  </div>

</div>



<div class="doc doc-object doc-function">



<h3 id="fixieai.client.client.FixieClient.create_agent" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_agent</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">query_url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">func_url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">more_info_url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">published</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Create a new Agent.</p>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b>handle</b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>The handle for the new Agent. This must be unique across all
Agents owned by this user.</p>
              </div>
            </li>
            <li>
              <b>name</b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>The name of the new Agent.</p>
              </div>
            </li>
            <li>
              <b>description</b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>A description of the new Agent.</p>
              </div>
            </li>
            <li>
              <b>query_url</b>
                  (<code><span title="typing.Optional">Optional</span>[str]</code>)
              –
              <div class="doc-md-description">
                <p>(deprecated) Unused.</p>
              </div>
            </li>
            <li>
              <b>func_url</b>
                  (<code><span title="typing.Optional">Optional</span>[str]</code>)
              –
              <div class="doc-md-description">
                <p>(deprecated) The URL of the new Agent's func endpoint.</p>
              </div>
            </li>
            <li>
              <b>more_info_url</b>
                  (<code><span title="typing.Optional">Optional</span>[str]</code>)
              –
              <div class="doc-md-description">
                <p>A URL with more information about the new Agent.</p>
              </div>
            </li>
            <li>
              <b>published</b>
                  (<code><span title="typing.Optional">Optional</span>[bool]</code>)
              –
              <div class="doc-md-description">
                <p>Whether the new Agent should be published.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
      <details class="quote">
        <summary>Source code in <code>fixieai/client/client.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">create_agent</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">handle</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">query_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">func_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">more_info_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">published</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Agent</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new Agent.</span>

<span class="sd">    Args:</span>
<span class="sd">        handle: The handle for the new Agent. This must be unique across all</span>
<span class="sd">            Agents owned by this user.</span>
<span class="sd">        name: The name of the new Agent.</span>
<span class="sd">        description: A description of the new Agent.</span>
<span class="sd">        query_url: (deprecated) Unused.</span>
<span class="sd">        func_url: (deprecated) The URL of the new Agent&#39;s func endpoint.</span>
<span class="sd">        more_info_url: A URL with more information about the new Agent.</span>
<span class="sd">        published: Whether the new Agent should be published.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">agent</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_current_username</span><span class="p">()</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">handle</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">agent</span><span class="o">.</span><span class="n">create_agent</span><span class="p">(</span>
        <span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">query_url</span><span class="p">,</span> <span class="n">func_url</span><span class="p">,</span> <span class="n">more_info_url</span><span class="p">,</span> <span class="n">published</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">agent</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="fixieai.client.client.FixieClient.create_agent_revision" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_agent_revision</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">make_current</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">reindex_corpora</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">external_url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">gzip_tarfile</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">environment</span><span class="o">=</span><span class="n">FixieEnvironment</span><span class="o">.</span><span class="n">PYTHON</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Creates a new Agent revision.</p>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b>handle</b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>The handle of the Agent. Must be owned by the current user.</p>
              </div>
            </li>
            <li>
              <b>make_current</b>
                  (<code>bool</code>)
              –
              <div class="doc-md-description">
                <p>Whether the new revision should be made the current (active) revision.</p>
              </div>
            </li>
            <li>
              <b>reindex_corpora</b>
                  (<code>bool</code>)
              –
              <div class="doc-md-description">
                <p>Whether to reindex all corpora for the new revision.</p>
              </div>
            </li>
            <li>
              <b>metadata</b>
                  (<code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[str, str]]</code>)
              –
              <div class="doc-md-description">
                <p>Optional client-provided metadata to associate with the revision.</p>
              </div>
            </li>
            <li>
              <b>external_url</b>
                  (<code><span title="typing.Optional">Optional</span>[str]</code>)
              –
              <div class="doc-md-description">
                <p>The URL at which the revision is hosted, if hosted externally.</p>
              </div>
            </li>
            <li>
              <b>gzip_tarfile</b>
                  (<code><span title="typing.Optional">Optional</span>[<span title="typing.BinaryIO">BinaryIO</span>]</code>)
              –
              <div class="doc-md-description">
                <p>A file-like of a gzip-compressed tarfile containing the files to deploy.</p>
              </div>
            </li>
            <li>
              <b>environment</b>
                  (<code><span title="fixieai.client.client.FixieEnvironment">FixieEnvironment</span></code>)
              –
              <div class="doc-md-description">
                <p>The environment in which the revision should be run.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>      <p>Exactly one of <code>external_url</code> and <code>gzip_tarfile</code> must be provided.</p>

      <details class="quote">
        <summary>Source code in <code>fixieai/client/client.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">create_agent_revision</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">handle</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">make_current</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">reindex_corpora</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">external_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">gzip_tarfile</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">BinaryIO</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">environment</span><span class="p">:</span> <span class="n">FixieEnvironment</span> <span class="o">=</span> <span class="n">FixieEnvironment</span><span class="o">.</span><span class="n">PYTHON</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a new Agent revision.</span>

<span class="sd">    Args:</span>
<span class="sd">        handle: The handle of the Agent. Must be owned by the current user.</span>
<span class="sd">        make_current: Whether the new revision should be made the current (active) revision.</span>
<span class="sd">        reindex_corpora: Whether to reindex all corpora for the new revision.</span>
<span class="sd">        metadata: Optional client-provided metadata to associate with the revision.</span>
<span class="sd">        external_url: The URL at which the revision is hosted, if hosted externally.</span>
<span class="sd">        gzip_tarfile: A file-like of a gzip-compressed tarfile containing the files to deploy.</span>
<span class="sd">        environment: The environment in which the revision should be run.</span>

<span class="sd">    Exactly one of `external_url` and `gzip_tarfile` must be provided.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">mutation</span> <span class="o">=</span> <span class="n">gql</span><span class="p">(</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        mutation CreateAgentRevision(</span>
<span class="sd">            $handle: String!,</span>
<span class="sd">            $metadata: [RevisionMetadataKeyValuePairInput!]!,</span>
<span class="sd">            $makeCurrent: Boolean!,</span>
<span class="sd">            $externalDeployment: ExternalDeploymentInput,</span>
<span class="sd">            $managedDeployment: ManagedDeploymentInput,</span>
<span class="sd">            $reindexCorpora: Boolean!,</span>
<span class="sd">        ) {</span>
<span class="sd">            createAgentRevision(agentHandle: $handle, makeCurrent: $makeCurrent, revision: { </span>
<span class="sd">                metadata: $metadata</span>
<span class="sd">                externalDeployment: $externalDeployment</span>
<span class="sd">                managedDeployment: $managedDeployment</span>
<span class="sd">            }, reindexCorpora: $reindexCorpora) {</span>
<span class="sd">                revision {</span>
<span class="sd">                    id</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">        }</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="p">)</span>

    <span class="k">with</span> <span class="n">utils</span><span class="o">.</span><span class="n">patched_gql_file_uploader</span><span class="p">(</span>
        <span class="n">gzip_tarfile</span><span class="p">,</span> <span class="s2">&quot;upload.tar.gz&quot;</span><span class="p">,</span> <span class="s2">&quot;application/gzip&quot;</span>
    <span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="n">mutation</span><span class="p">,</span>
            <span class="n">variable_values</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;handle&quot;</span><span class="p">:</span> <span class="n">handle</span><span class="p">,</span>
                <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span><span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="n">key</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">value</span><span class="p">}</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">metadata</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="p">]</span>
                <span class="k">if</span> <span class="n">metadata</span>
                <span class="k">else</span> <span class="p">[],</span>
                <span class="s2">&quot;makeCurrent&quot;</span><span class="p">:</span> <span class="n">make_current</span><span class="p">,</span>
                <span class="s2">&quot;reindexCorpora&quot;</span><span class="p">:</span> <span class="n">reindex_corpora</span><span class="p">,</span>
                <span class="s2">&quot;externalDeployment&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">external_url</span><span class="p">}</span>
                <span class="k">if</span> <span class="n">external_url</span>
                <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;managedDeployment&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;environment&quot;</span><span class="p">:</span> <span class="n">environment</span><span class="p">,</span>
                    <span class="s2">&quot;codePackage&quot;</span><span class="p">:</span> <span class="n">gzip_tarfile</span><span class="p">,</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="n">gzip_tarfile</span>
                <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="n">upload_files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="n">revision_id</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;createAgentRevision&quot;</span><span class="p">][</span><span class="s2">&quot;revision&quot;</span><span class="p">][</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">revision_id</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">revision_id</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="fixieai.client.client.FixieClient.create_session" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_session</span><span class="p">(</span><span class="n">frontend_agent_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Create a new Session.</p>

      <details class="quote">
        <summary>Source code in <code>fixieai/client/client.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">create_session</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frontend_agent_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Session</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new Session.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">Session</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frontend_agent_id</span><span class="o">=</span><span class="n">frontend_agent_id</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="fixieai.client.client.FixieClient.delete_agent_revision" class="doc doc-heading">
<code class="highlight language-python"><span class="n">delete_agent_revision</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">revision_id</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Deletes an Agent revision.</p>

      <details class="quote">
        <summary>Source code in <code>fixieai/client/client.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">delete_agent_revision</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">handle</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">revision_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deletes an Agent revision.&quot;&quot;&quot;</span>

    <span class="n">mutation</span> <span class="o">=</span> <span class="n">gql</span><span class="p">(</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        mutation DeleteRevision($handle: String!, $revisionId: ID!) {</span>
<span class="sd">            deleteAgentRevision(agentHandle: $handle, revisionId: $revisionId) {</span>
<span class="sd">                agent {</span>
<span class="sd">                    agentId</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">        }</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="p">)</span>
    <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="n">mutation</span><span class="p">,</span> <span class="n">variable_values</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;handle&quot;</span><span class="p">:</span> <span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;revisionId&quot;</span><span class="p">:</span> <span class="n">revision_id</span><span class="p">}</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="fixieai.client.client.FixieClient.deploy_agent" class="doc doc-heading">
<code class="highlight language-python"><span class="n">deploy_agent</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">gzip_tarfile</span><span class="p">,</span> <span class="n">environment</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Deploys an agent implementation.</p>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b>handle</b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>The handle of the Agent to deploy. Must be owned by the current user.</p>
              </div>
            </li>
            <li>
              <b>gzip_tarfile</b>
                  (<code><span title="typing.BinaryIO">BinaryIO</span></code>)
              –
              <div class="doc-md-description">
                <p>A file-like of a gzip-compressed tarfile containing the files to deploy.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
      <details class="quote">
        <summary>Source code in <code>fixieai/client/client.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">deploy_agent</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">handle</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">gzip_tarfile</span><span class="p">:</span> <span class="n">BinaryIO</span><span class="p">,</span> <span class="n">environment</span><span class="p">:</span> <span class="n">FixieEnvironment</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deploys an agent implementation.</span>

<span class="sd">    Args:</span>
<span class="sd">        handle: The handle of the Agent to deploy. Must be owned by the current user.</span>
<span class="sd">        gzip_tarfile: A file-like of a gzip-compressed tarfile containing the files to deploy.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_agent_revision</span><span class="p">(</span>
        <span class="n">handle</span><span class="p">,</span>
        <span class="n">make_current</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">gzip_tarfile</span><span class="o">=</span><span class="n">gzip_tarfile</span><span class="p">,</span>
        <span class="n">environment</span><span class="o">=</span><span class="n">environment</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="fixieai.client.client.FixieClient.get_agent" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_agent</span><span class="p">(</span><span class="n">agent_id</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return an existing Agent object.</p>

      <details class="quote">
        <summary>Source code in <code>fixieai/client/client.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_agent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Agent</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return an existing Agent object.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">Agent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent_id</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="fixieai.client.client.FixieClient.get_agent_page_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_agent_page_url</span><span class="p">(</span><span class="n">agent_id</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the URL of the Agent page on the Fixie Platform.</p>

      <details class="quote">
        <summary>Source code in <code>fixieai/client/client.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_agent_page_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the URL of the Agent page on the Fixie Platform.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">constants</span><span class="o">.</span><span class="n">FIXIE_WEB_AGENT_URL</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">agent_id</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="fixieai.client.client.FixieClient.get_agents" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_agents</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return metadata about all running Fixie Agents. The keys of the returned
dictionary are the Agent handles, and the values are dictionaries containing
metadata about each Agent.</p>

      <details class="quote">
        <summary>Source code in <code>fixieai/client/client.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_agents</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return metadata about all running Fixie Agents. The keys of the returned</span>
<span class="sd">    dictionary are the Agent handles, and the values are dictionaries containing</span>
<span class="sd">    metadata about each Agent.&quot;&quot;&quot;</span>

    <span class="n">query</span> <span class="o">=</span> <span class="n">gql</span><span class="p">(</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        query getAgents {</span>
<span class="sd">            allAgents {</span>
<span class="sd">                agentId</span>
<span class="sd">                name</span>
<span class="sd">                description</span>
<span class="sd">                moreInfoUrl</span>
<span class="sd">            }</span>
<span class="sd">        }</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
    <span class="k">assert</span> <span class="s2">&quot;allAgents&quot;</span> <span class="ow">in</span> <span class="n">result</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;allAgents&quot;</span><span class="p">],</span> <span class="nb">list</span><span class="p">)</span>
    <span class="n">agents</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;allAgents&quot;</span><span class="p">]</span>
    <span class="k">return</span> <span class="p">{</span><span class="n">agent</span><span class="p">[</span><span class="s2">&quot;agentId&quot;</span><span class="p">]:</span> <span class="n">agent</span> <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">agents</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="fixieai.client.client.FixieClient.get_current_agent_revision" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_current_agent_revision</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Gets the current (active) revision of an agent.</p>

      <details class="quote">
        <summary>Source code in <code>fixieai/client/client.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_current_agent_revision</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">handle</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets the current (active) revision of an agent.&quot;&quot;&quot;</span>
    <span class="n">agent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_agent</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>
    <span class="n">query</span> <span class="o">=</span> <span class="n">gql</span><span class="p">(</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        query GetRevisionId($agentId: String!) {</span>
<span class="sd">            agentById(agentId: $agentId) {</span>
<span class="sd">                currentRevision {</span>
<span class="sd">                    id</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">        }</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="p">)</span>

    <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="n">query</span><span class="p">,</span>
        <span class="n">variable_values</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;agentId&quot;</span><span class="p">:</span> <span class="n">agent</span><span class="o">.</span><span class="n">agent_id</span><span class="p">},</span>
    <span class="p">)</span>

    <span class="n">revision</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;agentById&quot;</span><span class="p">][</span><span class="s2">&quot;currentRevision&quot;</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">revision</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="n">revision</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="fixieai.client.client.FixieClient.get_current_user" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_current_user</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns the user metadata of the current user.</p>

      <details class="quote">
        <summary>Source code in <code>fixieai/client/client.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_current_user</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the user metadata of the current user.&quot;&quot;&quot;</span>
    <span class="n">query</span> <span class="o">=</span> <span class="n">gql</span><span class="p">(</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        query getUsername {</span>
<span class="sd">            user {</span>
<span class="sd">                username</span>
<span class="sd">                firstName</span>
<span class="sd">                lastName</span>
<span class="sd">                email</span>
<span class="sd">                organization {</span>
<span class="sd">                    handle</span>
<span class="sd">                    name</span>
<span class="sd">                }</span>
<span class="sd">                dailyQueryLimit</span>
<span class="sd">                dailyUsedQueries</span>
<span class="sd">                avatar</span>
<span class="sd">            }</span>
<span class="sd">        }</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
    <span class="k">assert</span> <span class="s2">&quot;user&quot;</span> <span class="ow">in</span> <span class="n">result</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;user&quot;</span><span class="p">],</span> <span class="nb">dict</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;user&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="fixieai.client.client.FixieClient.get_current_username" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_current_username</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns the username of the current user.</p>

      <details class="quote">
        <summary>Source code in <code>fixieai/client/client.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_current_username</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the username of the current user.&quot;&quot;&quot;</span>
    <span class="n">user</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_user</span><span class="p">()</span>
    <span class="k">assert</span> <span class="s2">&quot;username&quot;</span> <span class="ow">in</span> <span class="n">user</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">user</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">],</span> <span class="nb">str</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">user</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="fixieai.client.client.FixieClient.get_session" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_session</span><span class="p">(</span><span class="n">session_id</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return an existing Session object.</p>

      <details class="quote">
        <summary>Source code in <code>fixieai/client/client.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_session</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">session_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Session</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return an existing Session object.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">Session</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">session_id</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="fixieai.client.client.FixieClient.get_sessions" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_sessions</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return a list of all session IDs.</p>

      <details class="quote">
        <summary>Source code in <code>fixieai/client/client.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_sessions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a list of all session IDs.&quot;&quot;&quot;</span>

    <span class="n">query</span> <span class="o">=</span> <span class="n">gql</span><span class="p">(</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        query getSessions {</span>
<span class="sd">            allSessions {</span>
<span class="sd">                handle</span>
<span class="sd">            }</span>
<span class="sd">        }</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
    <span class="k">assert</span> <span class="s2">&quot;allSessions&quot;</span> <span class="ow">in</span> <span class="n">result</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;allSessions&quot;</span><span class="p">],</span> <span class="nb">list</span><span class="p">)</span>
    <span class="n">sessions</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;allSessions&quot;</span><span class="p">]</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">session</span><span class="p">[</span><span class="s2">&quot;handle&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">session</span> <span class="ow">in</span> <span class="n">sessions</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="fixieai.client.client.FixieClient.post" class="doc doc-heading">
<code class="highlight language-python"><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Performs a POST request with the appropriate auth token.
The response will be parsed as JSON and returned.</p>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b>url</b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>The URL to POST to, which should start with https://api.fixie.ai/api</p>
              </div>
            </li>
            <li>
              <b>data</b>
                  (<code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]]</code>)
              –
              <div class="doc-md-description">
                <p>The data to send in the request body (optional)</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
      <details class="quote">
        <summary>Source code in <code>fixieai/client/client.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Performs a POST request with the appropriate auth token.</span>
<span class="sd">    The response will be parsed as JSON and returned.</span>

<span class="sd">    Args:</span>
<span class="sd">        url: The URL to POST to, which should start with https://api.fixie.ai/api</span>
<span class="sd">        data: The data to send in the request body (optional)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="n">url</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">constants</span><span class="o">.</span><span class="n">FIXIE_API_URL</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rest_client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_request_headers</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
    <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="fixieai.client.client.FixieClient.refresh_agent" class="doc doc-heading">
<code class="highlight language-python"><span class="n">refresh_agent</span><span class="p">(</span><span class="n">agent_handle</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Indicates that an agent's prompts should be refreshed.</p>

      <details class="quote">
        <summary>Source code in <code>fixieai/client/client.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">refresh_agent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent_handle</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Indicates that an agent&#39;s prompts should be refreshed.&quot;&quot;&quot;</span>
    <span class="n">username</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_username</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">constants</span><span class="o">.</span><span class="n">FIXIE_REFRESH_URL</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">agent_handle</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="fixieai.client.client.FixieClient.set_current_agent_revision" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_current_agent_revision</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">revision_id</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Sets the current (active) revision of an agent.</p>

      <details class="quote">
        <summary>Source code in <code>fixieai/client/client.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_current_agent_revision</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">handle</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">revision_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sets the current (active) revision of an agent.&quot;&quot;&quot;</span>

    <span class="n">mutation</span> <span class="o">=</span> <span class="n">gql</span><span class="p">(</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        mutation SetCurrentAgentRevision(</span>
<span class="sd">            $handle: String!,</span>
<span class="sd">            $currentRevisionId: ID!) {</span>
<span class="sd">            updateAgent(</span>
<span class="sd">                agentData: {</span>
<span class="sd">                    handle: $handle,</span>
<span class="sd">                    currentRevisionId: $currentRevisionId</span>
<span class="sd">                }</span>
<span class="sd">            ) {</span>
<span class="sd">                agent {</span>
<span class="sd">                    agentId</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">        }</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="p">)</span>

    <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="n">mutation</span><span class="p">,</span>
        <span class="n">variable_values</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;handle&quot;</span><span class="p">:</span> <span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;currentRevisionId&quot;</span><span class="p">:</span> <span class="n">revision_id</span><span class="p">},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="fixieai.client.client.FixieClient.streaming_post" class="doc doc-heading">
<code class="highlight language-python"><span class="n">streaming_post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Performs a POST request with the appropriate auth token, and handles a streaming response.
The response will be yielded as a generator of JSON objects, one per line.</p>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b>url</b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>The URL to POST to, which should start with https://api.fixie.ai/api</p>
              </div>
            </li>
            <li>
              <b>data</b>
                  (<code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]]</code>)
              –
              <div class="doc-md-description">
                <p>The data to send in the request body (optional)</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
      <details class="quote">
        <summary>Source code in <code>fixieai/client/client.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">streaming_post</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Performs a POST request with the appropriate auth token, and handles a streaming response.</span>
<span class="sd">    The response will be yielded as a generator of JSON objects, one per line.</span>

<span class="sd">    Args:</span>
<span class="sd">        url: The URL to POST to, which should start with https://api.fixie.ai/api</span>
<span class="sd">        data: The data to send in the request body (optional)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="n">url</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">constants</span><span class="o">.</span><span class="n">FIXIE_API_URL</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rest_client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
        <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_request_headers</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>
    <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">iter_lines</span><span class="p">()</span> <span class="k">if</span> <span class="n">line</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="fixieai.client.client.get_agents" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_agents</span><span class="p">()</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Return metadata about all Fixie Agents. The keys of the returned
dictionary are Agent IDs, and the values are dictionaries containing
metadata about each Agent.</p>

      <details class="quote">
        <summary>Source code in <code>fixieai/client/client.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_agents</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return metadata about all Fixie Agents. The keys of the returned</span>
<span class="sd">    dictionary are Agent IDs, and the values are dictionaries containing</span>
<span class="sd">    metadata about each Agent.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">get_client</span><span class="p">()</span><span class="o">.</span><span class="n">get_agents</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="fixieai.client.client.get_client" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_client</span><span class="p">()</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Return the global FixieClient instance.</p>

      <details class="quote">
        <summary>Source code in <code>fixieai/client/client.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_client</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">FixieClient</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the global FixieClient instance.&quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">_CLIENT</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">_CLIENT</span><span class="p">:</span>
        <span class="n">_CLIENT</span> <span class="o">=</span> <span class="n">FixieClient</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">_CLIENT</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">_CLIENT</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="fixieai.client.client.get_embeds" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_embeds</span><span class="p">()</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Return a list of Embeds.</p>

      <details class="quote">
        <summary>Source code in <code>fixieai/client/client.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_embeds</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a list of Embeds.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">get_session</span><span class="p">()</span><span class="o">.</span><span class="n">get_embeds</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="fixieai.client.client.get_session" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_session</span><span class="p">()</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Return the global Fixie Session instance.</p>

      <details class="quote">
        <summary>Source code in <code>fixieai/client/client.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_session</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Session</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the global Fixie Session instance.&quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">_SESSION</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">_SESSION</span><span class="p">:</span>
        <span class="n">_SESSION</span> <span class="o">=</span> <span class="n">Session</span><span class="p">(</span><span class="n">get_client</span><span class="p">())</span>
    <span class="k">assert</span> <span class="n">_SESSION</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">_SESSION</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="fixieai.client.client.query" class="doc doc-heading">
<code class="highlight language-python"><span class="n">query</span><span class="p">(</span><span class="n">text</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Run a query.</p>

      <details class="quote">
        <summary>Source code in <code>fixieai/client/client.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">query</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run a query.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">get_session</span><span class="p">()</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-module">


<a id="fixieai.client.session"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="fixieai.client.session.Session" class="doc doc-heading">
        <code>Session</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Represents a single session with the Fixie system.</p>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b>client</b>
                  (<code><span title="fixieai.client.session.FixieClient">FixieClient</span></code>)
              –
              <div class="doc-md-description">
                <p>The FixieClient instance to use.</p>
              </div>
            </li>
            <li>
              <b>session_id</b>
                  (<code><span title="typing.Optional">Optional</span>[str]</code>)
              –
              <div class="doc-md-description">
                <p>The ID of the session to use. If not provided, a new
session will be created.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

        <details class="quote">
          <summary>Source code in <code>fixieai/client/session.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Session</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a single session with the Fixie system.</span>

<span class="sd">    Args:</span>
<span class="sd">        client: The FixieClient instance to use.</span>
<span class="sd">        session_id: The ID of the session to use. If not provided, a new</span>
<span class="sd">            session will be created.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">client</span><span class="p">:</span> <span class="n">FixieClient</span><span class="p">,</span>
        <span class="n">session_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">frontend_agent_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span> <span class="o">=</span> <span class="n">client</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">gqlclient</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_session_id</span> <span class="o">=</span> <span class="n">session_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_frontend_agent_id</span> <span class="o">=</span> <span class="n">frontend_agent_id</span>
        <span class="k">if</span> <span class="n">session_id</span><span class="p">:</span>
            <span class="c1"># Test that the session exists.</span>
            <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">()</span>
            <span class="k">assert</span> <span class="p">(</span>
                <span class="n">frontend_agent_id</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="p">),</span> <span class="s2">&quot;Cannot specify frontend_agent_id when using an existing session&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_session_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_session</span><span class="p">(</span><span class="n">frontend_agent_id</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">session_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the session ID used by this Fixie client.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session_id</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">session_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the URL of the Fixie session.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">/sessions/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">session_id</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">frontend_agent_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the frontend agent ID used by this Fixie client.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frontend_agent_id</span>

    <span class="k">def</span> <span class="nf">_create_session</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frontend_agent_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new session.&quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session_id</span> <span class="ow">is</span> <span class="kc">None</span>

        <span class="n">query</span> <span class="o">=</span> <span class="n">gql</span><span class="p">(</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            mutation CreateSession($frontendAgentId: String) {</span>
<span class="sd">                createSession(sessionData: {frontendAgentId: $frontendAgentId}) {</span>
<span class="sd">                    session {</span>
<span class="sd">                        handle</span>
<span class="sd">                        frontendAgentId</span>
<span class="sd">                    }</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">            &quot;&quot;&quot;</span>
        <span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="n">query</span><span class="p">,</span> <span class="n">variable_values</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;frontendAgentId&quot;</span><span class="p">:</span> <span class="n">frontend_agent_id</span><span class="p">}</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;createSession&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">result</span> <span class="ow">or</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;createSession&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to create Session&quot;</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;createSession&quot;</span><span class="p">],</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;createSession&quot;</span><span class="p">][</span><span class="s2">&quot;session&quot;</span><span class="p">],</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;createSession&quot;</span><span class="p">][</span><span class="s2">&quot;session&quot;</span><span class="p">][</span><span class="s2">&quot;handle&quot;</span><span class="p">],</span> <span class="nb">str</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;createSession&quot;</span><span class="p">][</span><span class="s2">&quot;session&quot;</span><span class="p">][</span><span class="s2">&quot;handle&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return metadata about this session.&quot;&quot;&quot;</span>

        <span class="n">query</span> <span class="o">=</span> <span class="n">gql</span><span class="p">(</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            query getSession($session_id: String!) {</span>
<span class="sd">                sessionByHandle(handle: $session_id) {</span>
<span class="sd">                    handle</span>
<span class="sd">                    name</span>
<span class="sd">                    description</span>
<span class="sd">                    frontendAgentId</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="n">query</span><span class="p">,</span> <span class="n">variable_values</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;session_id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session_id</span><span class="p">}</span>
        <span class="p">)</span>
        <span class="k">assert</span> <span class="s2">&quot;sessionByHandle&quot;</span> <span class="ow">in</span> <span class="n">result</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span>
            <span class="n">result</span><span class="p">[</span><span class="s2">&quot;sessionByHandle&quot;</span><span class="p">],</span> <span class="nb">dict</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_frontend_agent_id</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;sessionByHandle&quot;</span><span class="p">][</span><span class="s2">&quot;frontendAgentId&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;sessionByHandle&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">delete_session</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete the current session.&quot;&quot;&quot;</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">gql</span><span class="p">(</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            mutation DeleteSession($handle: String!) {</span>
<span class="sd">                deleteSession(handle: $handle) {</span>
<span class="sd">                    session {</span>
<span class="sd">                        handle</span>
<span class="sd">                    }</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">)</span>
        <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">variable_values</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;handle&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session_id</span><span class="p">})</span>

    <span class="k">def</span> <span class="nf">get_embeds</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the Embeds attached to this Session.&quot;&quot;&quot;</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">gql</span><span class="p">(</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            query getEmbeds($handle: String!) {</span>
<span class="sd">                sessionByHandle(handle: $handle) {</span>
<span class="sd">                    embeds {</span>
<span class="sd">                        key</span>
<span class="sd">                        embed {</span>
<span class="sd">                            id</span>
<span class="sd">                            contentType</span>
<span class="sd">                            created</span>
<span class="sd">                            contentHash</span>
<span class="sd">                            owner {</span>
<span class="sd">                                username</span>
<span class="sd">                            }</span>
<span class="sd">                            url</span>
<span class="sd">                        }</span>
<span class="sd">                    }</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="n">query</span><span class="p">,</span> <span class="n">variable_values</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;handle&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session_id</span><span class="p">}</span>
        <span class="p">)</span>
        <span class="k">assert</span> <span class="p">(</span>
            <span class="s2">&quot;sessionByHandle&quot;</span> <span class="ow">in</span> <span class="n">result</span>
            <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;sessionByHandle&quot;</span><span class="p">],</span> <span class="nb">dict</span><span class="p">)</span>
            <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;sessionByHandle&quot;</span><span class="p">][</span><span class="s2">&quot;embeds&quot;</span><span class="p">],</span> <span class="nb">list</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;sessionByHandle&quot;</span><span class="p">][</span><span class="s2">&quot;embeds&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_messages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the messages that make up this session.&quot;&quot;&quot;</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">gql</span><span class="p">(</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            query getMessages($handle: String!) {</span>
<span class="sd">                sessionByHandle(handle: $handle) {</span>
<span class="sd">                    messages {</span>
<span class="sd">                        id</span>
<span class="sd">                        text</span>
<span class="sd">                        sentBy {</span>
<span class="sd">                            handle</span>
<span class="sd">                        }</span>
<span class="sd">                        type</span>
<span class="sd">                        inReplyTo { id }</span>
<span class="sd">                        timestamp</span>
<span class="sd">                    }</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="n">query</span><span class="p">,</span> <span class="n">variable_values</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;handle&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session_id</span><span class="p">}</span>
        <span class="p">)</span>
        <span class="k">assert</span> <span class="p">(</span>
            <span class="s2">&quot;sessionByHandle&quot;</span> <span class="ow">in</span> <span class="n">result</span>
            <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;sessionByHandle&quot;</span><span class="p">],</span> <span class="nb">dict</span><span class="p">)</span>
            <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;sessionByHandle&quot;</span><span class="p">][</span><span class="s2">&quot;messages&quot;</span><span class="p">],</span> <span class="nb">list</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;sessionByHandle&quot;</span><span class="p">][</span><span class="s2">&quot;messages&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Run a single query against the Fixie API and return the response.&quot;&quot;&quot;</span>
        <span class="n">final</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">streaming_query</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
            <span class="n">final</span> <span class="o">=</span> <span class="n">message</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">final</span>

    <span class="k">def</span> <span class="nf">streaming_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Run a single query against the Fixie API and return a stream.&quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;session&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session_id</span><span class="p">,</span>
            <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="n">text</span><span class="p">},</span>
            <span class="s2">&quot;stream&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">constants</span><span class="o">.</span><span class="n">FIXIE_AGENT_URL</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_frontend_agent_id</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">for</span> <span class="n">response</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">streaming_post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
            <span class="k">yield</span> <span class="p">{</span>
                <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;message&quot;</span><span class="p">][</span><span class="s2">&quot;text&quot;</span><span class="p">],</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">],</span>
            <span class="p">}</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="fixieai.client.session.Session.frontend_agent_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">frontend_agent_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the frontend agent ID used by this Fixie client.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="fixieai.client.session.Session.session_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">session_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the session ID used by this Fixie client.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="fixieai.client.session.Session.session_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">session_url</span><span class="p">:</span> <span class="nb">str</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the URL of the Fixie session.</p>
  </div>

</div>



<div class="doc doc-object doc-function">



<h3 id="fixieai.client.session.Session.delete_session" class="doc doc-heading">
<code class="highlight language-python"><span class="n">delete_session</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Delete the current session.</p>

      <details class="quote">
        <summary>Source code in <code>fixieai/client/session.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">delete_session</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Delete the current session.&quot;&quot;&quot;</span>
    <span class="n">query</span> <span class="o">=</span> <span class="n">gql</span><span class="p">(</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        mutation DeleteSession($handle: String!) {</span>
<span class="sd">            deleteSession(handle: $handle) {</span>
<span class="sd">                session {</span>
<span class="sd">                    handle</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">        }</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="p">)</span>
    <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">variable_values</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;handle&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session_id</span><span class="p">})</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="fixieai.client.session.Session.get_embeds" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_embeds</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the Embeds attached to this Session.</p>

      <details class="quote">
        <summary>Source code in <code>fixieai/client/session.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_embeds</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the Embeds attached to this Session.&quot;&quot;&quot;</span>
    <span class="n">query</span> <span class="o">=</span> <span class="n">gql</span><span class="p">(</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        query getEmbeds($handle: String!) {</span>
<span class="sd">            sessionByHandle(handle: $handle) {</span>
<span class="sd">                embeds {</span>
<span class="sd">                    key</span>
<span class="sd">                    embed {</span>
<span class="sd">                        id</span>
<span class="sd">                        contentType</span>
<span class="sd">                        created</span>
<span class="sd">                        contentHash</span>
<span class="sd">                        owner {</span>
<span class="sd">                            username</span>
<span class="sd">                        }</span>
<span class="sd">                        url</span>
<span class="sd">                    }</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">        }</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="n">query</span><span class="p">,</span> <span class="n">variable_values</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;handle&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session_id</span><span class="p">}</span>
    <span class="p">)</span>
    <span class="k">assert</span> <span class="p">(</span>
        <span class="s2">&quot;sessionByHandle&quot;</span> <span class="ow">in</span> <span class="n">result</span>
        <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;sessionByHandle&quot;</span><span class="p">],</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;sessionByHandle&quot;</span><span class="p">][</span><span class="s2">&quot;embeds&quot;</span><span class="p">],</span> <span class="nb">list</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;sessionByHandle&quot;</span><span class="p">][</span><span class="s2">&quot;embeds&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="fixieai.client.session.Session.get_messages" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_messages</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the messages that make up this session.</p>

      <details class="quote">
        <summary>Source code in <code>fixieai/client/session.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_messages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the messages that make up this session.&quot;&quot;&quot;</span>
    <span class="n">query</span> <span class="o">=</span> <span class="n">gql</span><span class="p">(</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        query getMessages($handle: String!) {</span>
<span class="sd">            sessionByHandle(handle: $handle) {</span>
<span class="sd">                messages {</span>
<span class="sd">                    id</span>
<span class="sd">                    text</span>
<span class="sd">                    sentBy {</span>
<span class="sd">                        handle</span>
<span class="sd">                    }</span>
<span class="sd">                    type</span>
<span class="sd">                    inReplyTo { id }</span>
<span class="sd">                    timestamp</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">        }</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="n">query</span><span class="p">,</span> <span class="n">variable_values</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;handle&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session_id</span><span class="p">}</span>
    <span class="p">)</span>
    <span class="k">assert</span> <span class="p">(</span>
        <span class="s2">&quot;sessionByHandle&quot;</span> <span class="ow">in</span> <span class="n">result</span>
        <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;sessionByHandle&quot;</span><span class="p">],</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;sessionByHandle&quot;</span><span class="p">][</span><span class="s2">&quot;messages&quot;</span><span class="p">],</span> <span class="nb">list</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;sessionByHandle&quot;</span><span class="p">][</span><span class="s2">&quot;messages&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="fixieai.client.session.Session.get_metadata" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_metadata</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return metadata about this session.</p>

      <details class="quote">
        <summary>Source code in <code>fixieai/client/session.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return metadata about this session.&quot;&quot;&quot;</span>

    <span class="n">query</span> <span class="o">=</span> <span class="n">gql</span><span class="p">(</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        query getSession($session_id: String!) {</span>
<span class="sd">            sessionByHandle(handle: $session_id) {</span>
<span class="sd">                handle</span>
<span class="sd">                name</span>
<span class="sd">                description</span>
<span class="sd">                frontendAgentId</span>
<span class="sd">            }</span>
<span class="sd">        }</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="n">query</span><span class="p">,</span> <span class="n">variable_values</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;session_id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session_id</span><span class="p">}</span>
    <span class="p">)</span>
    <span class="k">assert</span> <span class="s2">&quot;sessionByHandle&quot;</span> <span class="ow">in</span> <span class="n">result</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span>
        <span class="n">result</span><span class="p">[</span><span class="s2">&quot;sessionByHandle&quot;</span><span class="p">],</span> <span class="nb">dict</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_frontend_agent_id</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;sessionByHandle&quot;</span><span class="p">][</span><span class="s2">&quot;frontendAgentId&quot;</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;sessionByHandle&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="fixieai.client.session.Session.query" class="doc doc-heading">
<code class="highlight language-python"><span class="n">query</span><span class="p">(</span><span class="n">text</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Run a single query against the Fixie API and return the response.</p>

      <details class="quote">
        <summary>Source code in <code>fixieai/client/session.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run a single query against the Fixie API and return the response.&quot;&quot;&quot;</span>
    <span class="n">final</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">streaming_query</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
        <span class="n">final</span> <span class="o">=</span> <span class="n">message</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">final</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="fixieai.client.session.Session.streaming_query" class="doc doc-heading">
<code class="highlight language-python"><span class="n">streaming_query</span><span class="p">(</span><span class="n">text</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Run a single query against the Fixie API and return a stream.</p>

      <details class="quote">
        <summary>Source code in <code>fixieai/client/session.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">streaming_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run a single query against the Fixie API and return a stream.&quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;session&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session_id</span><span class="p">,</span>
        <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="n">text</span><span class="p">},</span>
        <span class="s2">&quot;stream&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">constants</span><span class="o">.</span><span class="n">FIXIE_AGENT_URL</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_frontend_agent_id</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">for</span> <span class="n">response</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">streaming_post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="k">yield</span> <span class="p">{</span>
            <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;message&quot;</span><span class="p">][</span><span class="s2">&quot;text&quot;</span><span class="p">],</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">],</span>
        <span class="p">}</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>

<div class="doc doc-object doc-module">


<a id="fixieai.client.agent"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="fixieai.client.agent.Agent" class="doc doc-heading">
        <code>Agent</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Provides an interface to the Fixie GraphQL Agent API.</p>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b>client</b>
                  (<code><span title="fixieai.client.agent.FixieClient">FixieClient</span></code>)
              –
              <div class="doc-md-description">
                <p>The FixieClient instance to use.</p>
              </div>
            </li>
            <li>
              <b>agent_id</b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>The Agent ID, e.g., "fixie/calc", or handle, e.g., "dice".</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

        <details class="quote">
          <summary>Source code in <code>fixieai/client/agent.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Agent</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Provides an interface to the Fixie GraphQL Agent API.</span>

<span class="sd">    Args:</span>
<span class="sd">        client: The FixieClient instance to use.</span>
<span class="sd">        agent_id: The Agent ID, e.g., &quot;fixie/calc&quot;, or handle, e.g., &quot;dice&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">client</span><span class="p">:</span> <span class="n">FixieClient</span><span class="p">,</span>
        <span class="n">agent_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span> <span class="o">=</span> <span class="n">client</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">gqlclient</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_agent_id</span> <span class="o">=</span> <span class="n">agent_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_owner</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="s2">&quot;/&quot;</span> <span class="ow">in</span> <span class="n">agent_id</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_owner</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span> <span class="o">=</span> <span class="n">agent_id</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_owner</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">get_current_username</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span> <span class="o">=</span> <span class="n">agent_id</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">agent_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the agentId for this Agent.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_agent_id</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">handle</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the handle for this Agent.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">valid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return whether this Agent is valid.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the name for this Agent.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
        <span class="k">assert</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the description for this Agent.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">description</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">]</span>
        <span class="k">assert</span> <span class="n">description</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">description</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">description</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">queries</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the queries for this Agent.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">queries</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">[</span><span class="s2">&quot;queries&quot;</span><span class="p">]</span>
        <span class="k">assert</span> <span class="n">queries</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="p">(</span>
            <span class="nb">isinstance</span><span class="p">(</span><span class="n">queries</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">queries</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">queries</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">more_info_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the more info URL for this Agent.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">more_info_url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">[</span><span class="s2">&quot;moreInfoUrl&quot;</span><span class="p">]</span>
        <span class="k">assert</span> <span class="n">more_info_url</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">more_info_url</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">more_info_url</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">published</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the published status for this Agent.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">published</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">[</span><span class="s2">&quot;published&quot;</span><span class="p">]</span>
        <span class="k">assert</span> <span class="n">published</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">published</span><span class="p">,</span> <span class="nb">bool</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">published</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">owner</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the owner of this Agent, which is either a username or an Organization handle.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">owner_username</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">[</span><span class="s2">&quot;owner&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;username&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">[</span>
            <span class="s2">&quot;owner&quot;</span>
        <span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;handle&quot;</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">owner_username</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">owner_username</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">owner_username</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">query_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the query URL for this Agent.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">[</span><span class="s2">&quot;queryUrl&quot;</span><span class="p">]</span>
        <span class="k">assert</span> <span class="n">url</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">url</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">func_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the func URL for this Agent.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">[</span><span class="s2">&quot;funcUrl&quot;</span><span class="p">]</span>
        <span class="k">assert</span> <span class="n">url</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">url</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">created</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the creation timestamp for this Agent.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">ts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">[</span><span class="s2">&quot;created&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">ts</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">modified</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the modification timestamp for this Agent.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">ts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="p">[</span><span class="s2">&quot;modified&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">ts</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">get_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return metadata about this Agent.&quot;&quot;&quot;</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">gql</span><span class="p">(</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            query getAgentById($agentId: String!) {</span>
<span class="sd">                agentById(agentId: $agentId) {</span>
<span class="sd">                    agentId</span>
<span class="sd">                    handle</span>
<span class="sd">                    name</span>
<span class="sd">                    description</span>
<span class="sd">                    queries</span>
<span class="sd">                    moreInfoUrl</span>
<span class="sd">                    published</span>
<span class="sd">                    owner {</span>
<span class="sd">                        __typename</span>
<span class="sd">                        ... on UserType {</span>
<span class="sd">                            username</span>
<span class="sd">                        }</span>
<span class="sd">                        ... on OrganizationType {</span>
<span class="sd">                            handle</span>
<span class="sd">                        }</span>
<span class="sd">                    }</span>
<span class="sd">                    queryUrl</span>
<span class="sd">                    funcUrl</span>
<span class="sd">                    created</span>
<span class="sd">                    modified</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="n">query</span><span class="p">,</span> <span class="n">variable_values</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;agentId&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_owner</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">}</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;agentById&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">result</span> <span class="ow">or</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;agentById&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Cannot fetch agent metadata for </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_owner</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="n">agent_dict</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;agentById&quot;</span><span class="p">]</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">agent_dict</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">all</span><span class="p">(</span>
            <span class="nb">isinstance</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">agent_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">agent_dict</span>

    <span class="k">def</span> <span class="nf">create_agent</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">query_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">func_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">more_info_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">published</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new Agent with the given parameters.&quot;&quot;&quot;</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">gql</span><span class="p">(</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            mutation CreateAgent(</span>
<span class="sd">                $handle: String!,</span>
<span class="sd">                $name: String,</span>
<span class="sd">                $description: String!,</span>
<span class="sd">                $queryUrl: String,</span>
<span class="sd">                $funcUrl: String,</span>
<span class="sd">                $moreInfoUrl: String,</span>
<span class="sd">                $published: Boolean) {</span>
<span class="sd">                createAgent(</span>
<span class="sd">                    agentData: {</span>
<span class="sd">                        handle: $handle,</span>
<span class="sd">                        name: $name,</span>
<span class="sd">                        description: $description,</span>
<span class="sd">                        queryUrl: $queryUrl,</span>
<span class="sd">                        funcUrl: $funcUrl,</span>
<span class="sd">                        moreInfoUrl: $moreInfoUrl,</span>
<span class="sd">                        published: $published</span>
<span class="sd">                    }</span>
<span class="sd">                ) {</span>
<span class="sd">                    agent {</span>
<span class="sd">                        agentId</span>
<span class="sd">                    }</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">            &quot;&quot;&quot;</span>
        <span class="p">)</span>

        <span class="n">variable_values</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;handle&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">variable_values</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>
        <span class="n">variable_values</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">description</span>
        <span class="k">if</span> <span class="n">query_url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">variable_values</span><span class="p">[</span><span class="s2">&quot;queryUrl&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">query_url</span>
        <span class="k">if</span> <span class="n">func_url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s2">&quot;Setting func_url via create_agent is deprecated, use FixieClient.create_agent_revision instead.&quot;</span>
            <span class="p">)</span>
            <span class="n">variable_values</span><span class="p">[</span><span class="s2">&quot;funcUrl&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">func_url</span>
        <span class="k">if</span> <span class="n">more_info_url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">variable_values</span><span class="p">[</span><span class="s2">&quot;moreInfoUrl&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">more_info_url</span>
        <span class="k">if</span> <span class="n">published</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">variable_values</span><span class="p">[</span><span class="s2">&quot;published&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">published</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">variable_values</span><span class="o">=</span><span class="n">variable_values</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;createAgent&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">result</span> <span class="ow">or</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;createAgent&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to create Agent&quot;</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;createAgent&quot;</span><span class="p">],</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;createAgent&quot;</span><span class="p">][</span><span class="s2">&quot;agent&quot;</span><span class="p">],</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;createAgent&quot;</span><span class="p">][</span><span class="s2">&quot;agent&quot;</span><span class="p">][</span><span class="s2">&quot;agentId&quot;</span><span class="p">],</span> <span class="nb">str</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;createAgent&quot;</span><span class="p">][</span><span class="s2">&quot;agent&quot;</span><span class="p">][</span><span class="s2">&quot;agentId&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">update_agent</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">new_handle</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">query_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">func_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">more_info_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">published</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the Agent with the given parameters.&quot;&quot;&quot;</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">gql</span><span class="p">(</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            mutation UpdateAgent(</span>
<span class="sd">                $handle: String!,</span>
<span class="sd">                $newHandle: String,</span>
<span class="sd">                $name: String,</span>
<span class="sd">                $description: String,</span>
<span class="sd">                $queryUrl: String,</span>
<span class="sd">                $funcUrl: String,</span>
<span class="sd">                $moreInfoUrl: String,</span>
<span class="sd">                $published: Boolean) {</span>
<span class="sd">                updateAgent(</span>
<span class="sd">                    agentData: {</span>
<span class="sd">                        handle: $handle,</span>
<span class="sd">                        newHandle: $newHandle,</span>
<span class="sd">                        name: $name,</span>
<span class="sd">                        description: $description,</span>
<span class="sd">                        queryUrl: $queryUrl,</span>
<span class="sd">                        funcUrl: $funcUrl,</span>
<span class="sd">                        moreInfoUrl: $moreInfoUrl,</span>
<span class="sd">                        published: $published</span>
<span class="sd">                    }</span>
<span class="sd">                ) {</span>
<span class="sd">                    agent {</span>
<span class="sd">                        agentId</span>
<span class="sd">                    }</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">            &quot;&quot;&quot;</span>
        <span class="p">)</span>

        <span class="n">variable_values</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;handle&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">new_handle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">variable_values</span><span class="p">[</span><span class="s2">&quot;newHandle&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_handle</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">variable_values</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>
        <span class="k">if</span> <span class="n">description</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">variable_values</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">description</span>
        <span class="k">if</span> <span class="n">query_url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">variable_values</span><span class="p">[</span><span class="s2">&quot;queryUrl&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">query_url</span>
        <span class="k">if</span> <span class="n">func_url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s2">&quot;Setting func_url via update_agent is deprecated, use FixieClient.create_agent_revision instead.&quot;</span>
            <span class="p">)</span>
            <span class="n">variable_values</span><span class="p">[</span><span class="s2">&quot;funcUrl&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">func_url</span>
        <span class="k">if</span> <span class="n">more_info_url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">variable_values</span><span class="p">[</span><span class="s2">&quot;moreInfoUrl&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">more_info_url</span>
        <span class="k">if</span> <span class="n">published</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">variable_values</span><span class="p">[</span><span class="s2">&quot;published&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">published</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">variable_values</span><span class="o">=</span><span class="n">variable_values</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;updateAgent&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">result</span> <span class="ow">or</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;updateAgent&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to update Agent&quot;</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;updateAgent&quot;</span><span class="p">],</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;updateAgent&quot;</span><span class="p">][</span><span class="s2">&quot;agent&quot;</span><span class="p">],</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;updateAgent&quot;</span><span class="p">][</span><span class="s2">&quot;agent&quot;</span><span class="p">][</span><span class="s2">&quot;agentId&quot;</span><span class="p">],</span> <span class="nb">str</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">new_handle</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span> <span class="o">=</span> <span class="n">new_handle</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;updateAgent&quot;</span><span class="p">][</span><span class="s2">&quot;agent&quot;</span><span class="p">][</span><span class="s2">&quot;agentId&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">delete_agent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete this Agent.&quot;&quot;&quot;</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">gql</span><span class="p">(</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            mutation DeleteAgent($owner: String!, $handle: String!) {</span>
<span class="sd">                deleteAgent(agentData: {owner: $owner, handle: $handle}) {</span>
<span class="sd">                    agent {</span>
<span class="sd">                        handle</span>
<span class="sd">                    }</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">)</span>
        <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="n">query</span><span class="p">,</span> <span class="n">variable_values</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;owner&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="p">,</span> <span class="s2">&quot;handle&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">}</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="fixieai.client.agent.Agent.agent_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">agent_id</span><span class="p">:</span> <span class="nb">str</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the agentId for this Agent.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="fixieai.client.agent.Agent.created" class="doc doc-heading">
<code class="highlight language-python"><span class="n">created</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">]</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the creation timestamp for this Agent.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="fixieai.client.agent.Agent.description" class="doc doc-heading">
<code class="highlight language-python"><span class="n">description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the description for this Agent.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="fixieai.client.agent.Agent.func_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">func_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the func URL for this Agent.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="fixieai.client.agent.Agent.handle" class="doc doc-heading">
<code class="highlight language-python"><span class="n">handle</span><span class="p">:</span> <span class="nb">str</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the handle for this Agent.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="fixieai.client.agent.Agent.modified" class="doc doc-heading">
<code class="highlight language-python"><span class="n">modified</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">]</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the modification timestamp for this Agent.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="fixieai.client.agent.Agent.more_info_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">more_info_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the more info URL for this Agent.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="fixieai.client.agent.Agent.name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the name for this Agent.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="fixieai.client.agent.Agent.owner" class="doc doc-heading">
<code class="highlight language-python"><span class="n">owner</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the owner of this Agent, which is either a username or an Organization handle.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="fixieai.client.agent.Agent.published" class="doc doc-heading">
<code class="highlight language-python"><span class="n">published</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the published status for this Agent.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="fixieai.client.agent.Agent.queries" class="doc doc-heading">
<code class="highlight language-python"><span class="n">queries</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the queries for this Agent.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="fixieai.client.agent.Agent.query_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">query_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the query URL for this Agent.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="fixieai.client.agent.Agent.valid" class="doc doc-heading">
<code class="highlight language-python"><span class="n">valid</span><span class="p">:</span> <span class="nb">bool</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return whether this Agent is valid.</p>
  </div>

</div>



<div class="doc doc-object doc-function">



<h3 id="fixieai.client.agent.Agent.create_agent" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_agent</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">query_url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">func_url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">more_info_url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">published</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Create a new Agent with the given parameters.</p>

      <details class="quote">
        <summary>Source code in <code>fixieai/client/agent.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">create_agent</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">query_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">func_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">more_info_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">published</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new Agent with the given parameters.&quot;&quot;&quot;</span>
    <span class="n">query</span> <span class="o">=</span> <span class="n">gql</span><span class="p">(</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        mutation CreateAgent(</span>
<span class="sd">            $handle: String!,</span>
<span class="sd">            $name: String,</span>
<span class="sd">            $description: String!,</span>
<span class="sd">            $queryUrl: String,</span>
<span class="sd">            $funcUrl: String,</span>
<span class="sd">            $moreInfoUrl: String,</span>
<span class="sd">            $published: Boolean) {</span>
<span class="sd">            createAgent(</span>
<span class="sd">                agentData: {</span>
<span class="sd">                    handle: $handle,</span>
<span class="sd">                    name: $name,</span>
<span class="sd">                    description: $description,</span>
<span class="sd">                    queryUrl: $queryUrl,</span>
<span class="sd">                    funcUrl: $funcUrl,</span>
<span class="sd">                    moreInfoUrl: $moreInfoUrl,</span>
<span class="sd">                    published: $published</span>
<span class="sd">                }</span>
<span class="sd">            ) {</span>
<span class="sd">                agent {</span>
<span class="sd">                    agentId</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">        }</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="p">)</span>

    <span class="n">variable_values</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;handle&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">variable_values</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>
    <span class="n">variable_values</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">description</span>
    <span class="k">if</span> <span class="n">query_url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">variable_values</span><span class="p">[</span><span class="s2">&quot;queryUrl&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">query_url</span>
    <span class="k">if</span> <span class="n">func_url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s2">&quot;Setting func_url via create_agent is deprecated, use FixieClient.create_agent_revision instead.&quot;</span>
        <span class="p">)</span>
        <span class="n">variable_values</span><span class="p">[</span><span class="s2">&quot;funcUrl&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">func_url</span>
    <span class="k">if</span> <span class="n">more_info_url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">variable_values</span><span class="p">[</span><span class="s2">&quot;moreInfoUrl&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">more_info_url</span>
    <span class="k">if</span> <span class="n">published</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">variable_values</span><span class="p">[</span><span class="s2">&quot;published&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">published</span>

    <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">variable_values</span><span class="o">=</span><span class="n">variable_values</span><span class="p">)</span>
    <span class="k">if</span> <span class="s2">&quot;createAgent&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">result</span> <span class="ow">or</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;createAgent&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to create Agent&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;createAgent&quot;</span><span class="p">],</span> <span class="nb">dict</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;createAgent&quot;</span><span class="p">][</span><span class="s2">&quot;agent&quot;</span><span class="p">],</span> <span class="nb">dict</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;createAgent&quot;</span><span class="p">][</span><span class="s2">&quot;agent&quot;</span><span class="p">][</span><span class="s2">&quot;agentId&quot;</span><span class="p">],</span> <span class="nb">str</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;createAgent&quot;</span><span class="p">][</span><span class="s2">&quot;agent&quot;</span><span class="p">][</span><span class="s2">&quot;agentId&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="fixieai.client.agent.Agent.delete_agent" class="doc doc-heading">
<code class="highlight language-python"><span class="n">delete_agent</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Delete this Agent.</p>

      <details class="quote">
        <summary>Source code in <code>fixieai/client/agent.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">delete_agent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Delete this Agent.&quot;&quot;&quot;</span>
    <span class="n">query</span> <span class="o">=</span> <span class="n">gql</span><span class="p">(</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        mutation DeleteAgent($owner: String!, $handle: String!) {</span>
<span class="sd">            deleteAgent(agentData: {owner: $owner, handle: $handle}) {</span>
<span class="sd">                agent {</span>
<span class="sd">                    handle</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">        }</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="p">)</span>
    <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="n">query</span><span class="p">,</span> <span class="n">variable_values</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;owner&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="p">,</span> <span class="s2">&quot;handle&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">}</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="fixieai.client.agent.Agent.get_metadata" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_metadata</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return metadata about this Agent.</p>

      <details class="quote">
        <summary>Source code in <code>fixieai/client/agent.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return metadata about this Agent.&quot;&quot;&quot;</span>
    <span class="n">query</span> <span class="o">=</span> <span class="n">gql</span><span class="p">(</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        query getAgentById($agentId: String!) {</span>
<span class="sd">            agentById(agentId: $agentId) {</span>
<span class="sd">                agentId</span>
<span class="sd">                handle</span>
<span class="sd">                name</span>
<span class="sd">                description</span>
<span class="sd">                queries</span>
<span class="sd">                moreInfoUrl</span>
<span class="sd">                published</span>
<span class="sd">                owner {</span>
<span class="sd">                    __typename</span>
<span class="sd">                    ... on UserType {</span>
<span class="sd">                        username</span>
<span class="sd">                    }</span>
<span class="sd">                    ... on OrganizationType {</span>
<span class="sd">                        handle</span>
<span class="sd">                    }</span>
<span class="sd">                }</span>
<span class="sd">                queryUrl</span>
<span class="sd">                funcUrl</span>
<span class="sd">                created</span>
<span class="sd">                modified</span>
<span class="sd">            }</span>
<span class="sd">        }</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="n">query</span><span class="p">,</span> <span class="n">variable_values</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;agentId&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_owner</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">}</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="s2">&quot;agentById&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">result</span> <span class="ow">or</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;agentById&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Cannot fetch agent metadata for </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_owner</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
    <span class="n">agent_dict</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;agentById&quot;</span><span class="p">]</span>

    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">agent_dict</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">all</span><span class="p">(</span>
        <span class="nb">isinstance</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">agent_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">agent_dict</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="fixieai.client.agent.Agent.update_agent" class="doc doc-heading">
<code class="highlight language-python"><span class="n">update_agent</span><span class="p">(</span><span class="n">new_handle</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">query_url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">func_url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">more_info_url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">published</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Update the Agent with the given parameters.</p>

      <details class="quote">
        <summary>Source code in <code>fixieai/client/agent.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">update_agent</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">new_handle</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">query_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">func_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">more_info_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">published</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Update the Agent with the given parameters.&quot;&quot;&quot;</span>
    <span class="n">query</span> <span class="o">=</span> <span class="n">gql</span><span class="p">(</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        mutation UpdateAgent(</span>
<span class="sd">            $handle: String!,</span>
<span class="sd">            $newHandle: String,</span>
<span class="sd">            $name: String,</span>
<span class="sd">            $description: String,</span>
<span class="sd">            $queryUrl: String,</span>
<span class="sd">            $funcUrl: String,</span>
<span class="sd">            $moreInfoUrl: String,</span>
<span class="sd">            $published: Boolean) {</span>
<span class="sd">            updateAgent(</span>
<span class="sd">                agentData: {</span>
<span class="sd">                    handle: $handle,</span>
<span class="sd">                    newHandle: $newHandle,</span>
<span class="sd">                    name: $name,</span>
<span class="sd">                    description: $description,</span>
<span class="sd">                    queryUrl: $queryUrl,</span>
<span class="sd">                    funcUrl: $funcUrl,</span>
<span class="sd">                    moreInfoUrl: $moreInfoUrl,</span>
<span class="sd">                    published: $published</span>
<span class="sd">                }</span>
<span class="sd">            ) {</span>
<span class="sd">                agent {</span>
<span class="sd">                    agentId</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">        }</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="p">)</span>

    <span class="n">variable_values</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;handle&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">new_handle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">variable_values</span><span class="p">[</span><span class="s2">&quot;newHandle&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_handle</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">variable_values</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>
    <span class="k">if</span> <span class="n">description</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">variable_values</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">description</span>
    <span class="k">if</span> <span class="n">query_url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">variable_values</span><span class="p">[</span><span class="s2">&quot;queryUrl&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">query_url</span>
    <span class="k">if</span> <span class="n">func_url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s2">&quot;Setting func_url via update_agent is deprecated, use FixieClient.create_agent_revision instead.&quot;</span>
        <span class="p">)</span>
        <span class="n">variable_values</span><span class="p">[</span><span class="s2">&quot;funcUrl&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">func_url</span>
    <span class="k">if</span> <span class="n">more_info_url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">variable_values</span><span class="p">[</span><span class="s2">&quot;moreInfoUrl&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">more_info_url</span>
    <span class="k">if</span> <span class="n">published</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">variable_values</span><span class="p">[</span><span class="s2">&quot;published&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">published</span>

    <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gqlclient</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">variable_values</span><span class="o">=</span><span class="n">variable_values</span><span class="p">)</span>
    <span class="k">if</span> <span class="s2">&quot;updateAgent&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">result</span> <span class="ow">or</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;updateAgent&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to update Agent&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;updateAgent&quot;</span><span class="p">],</span> <span class="nb">dict</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;updateAgent&quot;</span><span class="p">][</span><span class="s2">&quot;agent&quot;</span><span class="p">],</span> <span class="nb">dict</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;updateAgent&quot;</span><span class="p">][</span><span class="s2">&quot;agent&quot;</span><span class="p">][</span><span class="s2">&quot;agentId&quot;</span><span class="p">],</span> <span class="nb">str</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">new_handle</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span> <span class="o">=</span> <span class="n">new_handle</span>
    <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;updateAgent&quot;</span><span class="p">][</span><span class="s2">&quot;agent&quot;</span><span class="p">][</span><span class="s2">&quot;agentId&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>

<div class="doc doc-object doc-module">


<a id="fixieai.cli.cli"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h2 id="fixieai.cli.cli.fixie" class="doc doc-heading">
<code class="highlight language-python"><span class="n">fixie</span><span class="p">(</span><span class="n">ctx</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Command-line interface to the Fixie platform.</p>

      <details class="quote">
        <summary>Source code in <code>fixieai/cli/cli.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@click</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>
<span class="nd">@click</span><span class="o">.</span><span class="n">pass_context</span>
<span class="k">def</span> <span class="nf">fixie</span><span class="p">(</span><span class="n">ctx</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Command-line interface to the Fixie platform.&quot;&quot;&quot;</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">ensure_object</span><span class="p">(</span><span class="n">CliContext</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-module">


<a id="fixieai.cli.session.console"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="fixieai.cli.session.console.Console" class="doc doc-heading">
        <code>Console</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>A simple console interface for Fixie.</p>


        <details class="quote">
          <summary>Source code in <code>fixieai/cli/session/console.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Console</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A simple console interface for Fixie.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">client</span><span class="p">:</span> <span class="n">FixieClient</span><span class="p">,</span>
        <span class="n">session</span><span class="p">:</span> <span class="n">Session</span><span class="p">,</span>
        <span class="n">history_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">HISTORY_FILE</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span> <span class="o">=</span> <span class="n">client</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_session</span> <span class="o">=</span> <span class="n">session</span>
        <span class="n">history_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">history_file</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">history_file</span><span class="p">),</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_history_file</span> <span class="o">=</span> <span class="n">history_file</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_response_index</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">initial_message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Run the console application.&quot;&quot;&quot;</span>

        <span class="n">textconsole</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="s2">&quot;[blue]Welcome to Fixie!&quot;</span><span class="p">)</span>
        <span class="n">textconsole</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Connected to: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">session_url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Show what&#39;s already in the session thus far.</span>
        <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">get_messages</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_show_message</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">show_user_message</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">history</span> <span class="o">=</span> <span class="n">prompt_toolkit</span><span class="o">.</span><span class="n">history</span><span class="o">.</span><span class="n">FileHistory</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_history_file</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">initial_message</span><span class="p">:</span>
            <span class="n">prompt_toolkit</span><span class="o">.</span><span class="n">print_formatted_text</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">PROMPT</span><span class="si">}{</span><span class="n">initial_message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">history</span><span class="o">.</span><span class="n">append_string</span><span class="p">(</span><span class="n">initial_message</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_query</span><span class="p">(</span><span class="n">initial_message</span><span class="p">)</span>

        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">in_text</span> <span class="o">=</span> <span class="n">prompt_toolkit</span><span class="o">.</span><span class="n">prompt</span><span class="p">(</span>
                <span class="n">PROMPT</span><span class="p">,</span>
                <span class="n">history</span><span class="o">=</span><span class="n">history</span><span class="p">,</span>
                <span class="n">auto_suggest</span><span class="o">=</span><span class="n">prompt_toolkit</span><span class="o">.</span><span class="n">auto_suggest</span><span class="o">.</span><span class="n">AutoSuggestFromHistory</span><span class="p">(),</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_query</span><span class="p">(</span><span class="n">in_text</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">in_text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_response_index</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_response_index</span><span class="si">}</span><span class="s2">❯ &quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">streaming_query</span><span class="p">(</span><span class="n">in_text</span><span class="p">):</span>
                <span class="n">text</span> <span class="o">=</span> <span class="n">message</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">][</span><span class="n">pos</span><span class="p">:]</span>
                <span class="n">textconsole</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
                <span class="n">pos</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_show_embeds</span><span class="p">(</span><span class="n">message</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">])</span>
        <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">HTTPError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">textconsole</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;🚨 </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span>

    <span class="k">def</span> <span class="nf">_show_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">show_user_message</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Shows a message dict from FixieClient.</span>

<span class="sd">        If show_user_message is set, the user messages are also printed with the PROMPT.</span>
<span class="sd">        This option is useful for showing previous messages in the chat when connecting</span>
<span class="sd">        to a session.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sender_handle</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">message</span><span class="p">[</span><span class="s2">&quot;sentBy&quot;</span><span class="p">][</span><span class="s2">&quot;handle&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="n">message</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;sentBy&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="s2">&quot;&lt;unknown&gt;&quot;</span>
        <span class="p">)</span>
        <span class="n">message_text</span> <span class="o">=</span> <span class="n">message</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">message</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;query&quot;</span> <span class="ow">and</span> <span class="n">sender_handle</span> <span class="o">==</span> <span class="s2">&quot;user&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">show_user_message</span><span class="p">:</span>
                <span class="n">textconsole</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="n">markdown</span><span class="o">.</span><span class="n">Markdown</span><span class="p">(</span><span class="n">PROMPT</span> <span class="o">+</span> <span class="n">message_text</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">message</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;response&quot;</span><span class="p">:</span>
            <span class="n">textconsole</span><span class="o">.</span><span class="n">print</span><span class="p">(</span>
                <span class="n">markdown</span><span class="o">.</span><span class="n">Markdown</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   @</span><span class="si">{</span><span class="n">sender_handle</span><span class="si">}</span><span class="s2">: &quot;</span> <span class="o">+</span> <span class="n">message_text</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;dim&quot;</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_response_index</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">textconsole</span><span class="o">.</span><span class="n">print</span><span class="p">(</span>
                <span class="n">markdown</span><span class="o">.</span><span class="n">Markdown</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_response_index</span><span class="si">}</span><span class="s2">❯ &quot;</span> <span class="o">+</span> <span class="n">message_text</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_show_embeds</span><span class="p">(</span><span class="n">message</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">_show_embeds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Shows embeds referenced in `message_text`.&quot;&quot;&quot;</span>
        <span class="c1"># Check embed references in message (denoted by #id).</span>
        <span class="n">embed_ids</span> <span class="o">=</span> <span class="n">_extract_embed_refs</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">embed_ids</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="c1"># Get a dict of all embed_id -&gt; embeds in the session.</span>
        <span class="n">embeds</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">embed_dict</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">]:</span> <span class="n">embed_dict</span><span class="p">[</span><span class="s2">&quot;embed&quot;</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">embed_dict</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">get_embeds</span><span class="p">()</span>
        <span class="p">}</span>
        <span class="c1"># Show what we can find.</span>
        <span class="k">for</span> <span class="n">embed_id</span> <span class="ow">in</span> <span class="n">embed_ids</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">embed_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">embeds</span><span class="p">:</span>
                <span class="n">textconsole</span><span class="o">.</span><span class="n">print</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;   [dim]embed #</span><span class="si">{</span><span class="n">embed_id</span><span class="si">}</span><span class="s2"> not found in session[/]&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;red&quot;</span>
                <span class="p">)</span>
                <span class="k">continue</span>
            <span class="n">_show_embed</span><span class="p">(</span>
                <span class="n">embeds</span><span class="p">[</span><span class="n">embed_id</span><span class="p">][</span><span class="s2">&quot;url&quot;</span><span class="p">],</span>
                <span class="n">embeds</span><span class="p">[</span><span class="n">embed_id</span><span class="p">][</span><span class="s2">&quot;contentType&quot;</span><span class="p">],</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="fixieai.cli.session.console.Console.run" class="doc doc-heading">
<code class="highlight language-python"><span class="n">run</span><span class="p">(</span><span class="n">initial_message</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Run the console application.</p>

      <details class="quote">
        <summary>Source code in <code>fixieai/cli/session/console.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">run</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">initial_message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run the console application.&quot;&quot;&quot;</span>

    <span class="n">textconsole</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="s2">&quot;[blue]Welcome to Fixie!&quot;</span><span class="p">)</span>
    <span class="n">textconsole</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Connected to: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">session_url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Show what&#39;s already in the session thus far.</span>
    <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="o">.</span><span class="n">get_messages</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_show_message</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">show_user_message</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">history</span> <span class="o">=</span> <span class="n">prompt_toolkit</span><span class="o">.</span><span class="n">history</span><span class="o">.</span><span class="n">FileHistory</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_history_file</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">initial_message</span><span class="p">:</span>
        <span class="n">prompt_toolkit</span><span class="o">.</span><span class="n">print_formatted_text</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">PROMPT</span><span class="si">}{</span><span class="n">initial_message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">history</span><span class="o">.</span><span class="n">append_string</span><span class="p">(</span><span class="n">initial_message</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_query</span><span class="p">(</span><span class="n">initial_message</span><span class="p">)</span>

    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">in_text</span> <span class="o">=</span> <span class="n">prompt_toolkit</span><span class="o">.</span><span class="n">prompt</span><span class="p">(</span>
            <span class="n">PROMPT</span><span class="p">,</span>
            <span class="n">history</span><span class="o">=</span><span class="n">history</span><span class="p">,</span>
            <span class="n">auto_suggest</span><span class="o">=</span><span class="n">prompt_toolkit</span><span class="o">.</span><span class="n">auto_suggest</span><span class="o">.</span><span class="n">AutoSuggestFromHistory</span><span class="p">(),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_query</span><span class="p">(</span><span class="n">in_text</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../langchain/" class="btn btn-neutral float-left" title="Using Langchain"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../python-agent-api/" class="btn btn-neutral float-right" title="Python Agent API">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>Copyright (c) 2023 Fixie.ai, Inc.</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../langchain/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../python-agent-api/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
