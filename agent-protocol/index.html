<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://fixie.ai/agent-protocol/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Agent Protocol - Fixie Developer Portal</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../assets/_mkdocstrings.css" rel="stylesheet" />
        <link href="../css/custom.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Agent Protocol";
        var mkdocs_page_input_path = "agent-protocol.md";
        var mkdocs_page_url = "/agent-protocol/";
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script>
<script
async
src="https://www.googletagmanager.com/gtag/js?id=G-T4VHHYL14W"
></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());
  
  gtag("config", "G-T4VHHYL14W");
  </script>
<script>
(function(apiKey){
    (function(p,e,n,d,o){var v,w,x,y,z;o=p[d]=p[d]||{};o._q=o._q||[];
    v=['initialize','identify','updateOptions','pageLoad','track'];for(w=0,x=v.length;w<x;++w)(function(m){
        o[m]=o[m]||function(){o._q[m===v[0]?'unshift':'push']([m].concat([].slice.call(arguments,0)));};})(v[w]);
        y=e.createElement(n);y.async=!0;y.src='https://cdn.pendo.io/agent/static/'+apiKey+'/pendo.js';
        z=e.getElementsByTagName(n)[0];z.parentNode.insertBefore(y,z);})(window,document,'script','pendo');
})('6180bd3c-4b13-420f-6928-e46f13dabb77');
</script>
<script type="text/javascript">
  (function(f,b){if(!b.__SV){var e,g,i,h;window.mixpanel=b;b._i=[];b.init=function(e,f,c){function g(a,d){var b=d.split(".");2==b.length&&(a=a[b[0]],d=b[1]);a[d]=function(){a.push([d].concat(Array.prototype.slice.call(arguments,0)))}}var a=b;"undefined"!==typeof c?a=b[c]=[]:c="mixpanel";a.people=a.people||[];a.toString=function(a){var d="mixpanel";"mixpanel"!==c&&(d+="."+c);a||(d+=" (stub)");return d};a.people.toString=function(){return a.toString(1)+".people (stub)"};i="disable time_event track track_pageview track_links track_forms track_with_groups add_group set_group remove_group register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking start_batch_senders people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user people.remove".split(" ");
  for(h=0;h<i.length;h++)g(a,i[h]);var j="set set_once union unset remove delete".split(" ");a.get_group=function(){function b(c){d[c]=function(){call2_args=arguments;call2=[c].concat(Array.prototype.slice.call(call2_args,0));a.push([e,call2])}}for(var d={},e=["get_group"].concat(Array.prototype.slice.call(arguments,0)),c=0;c<j.length;c++)b(j[c]);return d};b._i.push([e,f,c])};b.__SV=1.2;e=f.createElement("script");e.type="text/javascript";e.async=!0;e.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?
  MIXPANEL_CUSTOM_LIB_URL:"file:"===f.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";g=f.getElementsByTagName("script")[0];g.parentNode.insertBefore(e,g)}})(document,window.mixpanel||[]);
  </script>
<script type="text/javascript">
  window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src="https://cdn.heapanalytics.com/js/heap-"+e+".js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(r,a);for(var n=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","resetIdentity","removeEventProperty","setEventProperties","track","unsetEventProperty"],o=0;o<p.length;o++)heap[p[o]]=n(p[o])};
  heap.load("2470912105");
</script>

<script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/24456200.js"></script>

<script>
  (function(h,o,u,n,d) {
     h=h[d]=h[d]||{q:[],onReady:function(c){h.q.push(c)}}
     d=o.createElement(u);d.async=1;d.src=n
     n=o.getElementsByTagName(u)[0];n.parentNode.insertBefore(d,n)
  })(window,document,'script','https://www.datadoghq-browser-agent.com/us1/v4/datadog-rum.js','DD_RUM')
  window.DD_RUM.onReady(function() {
    window.DD_RUM.init({
      applicationId: 'c3ef95f4-ab34-4aff-9f26-ed6bb5734d7b',
      clientToken: 'pub2e9329101f46c60b6b7bed60bf7c5888',
      site: 'datadoghq.com',
      service: 'fixie---web',
      env: 'docs',
      version: 'docs',
      sessionSampleRate: 100,
      sessionReplaySampleRate: 20,
      trackUserInteractions: true,
      trackResources: true,
      trackLongTasks: true,
      defaultPrivacyLevel: 'mask-user-input',
    })
  })
</script>

<script>
mixpanel.init('d695f343799edd2d62beb38eea46b4fc', { debug: true });
window.pendo.initialize();
</script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="..">
          <img src="../assets/fixie-logo-docs.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Introduction</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../architecture/">Architecture</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Building Fixie Agents</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../agent-quickstart/">Agent QuickStart</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../agents/">Fixie Agent API</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Agent Protocol</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#few-shot-examples">Few-shot examples</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#function-invocation">Function invocation</a>
    </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Common Use Cases</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../document-qa/">Document Question and Answering</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../langchain/">Using Langchain</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Python SDK</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../python-client-api/">Python Client API</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../python-agent-api/">Python Agent API</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Command line interface</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../cli/">CLI</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">GraphQL API</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="https://app.fixie.ai/static/docs/index.html">GraphQL</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Other links</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="https://github.com/fixie-ai/fixie-sdk">GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://discord.gg/MsKAeKF8kU">Discord</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://twitter.com/fixieai">Twitter</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Fixie Developer Portal</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
          <li>Building Fixie Agents &raquo;</li>
      <li>Agent Protocol</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="fixie-agent-protocol">Fixie Agent Protocol</h1>
<p>Fixie agents can be implemented in any programming language. The Fixie <a href="../python-agent-api/">Python Agent API</a> provides a Python SDK that simplifies the implementation of agents in Python. However, it is possible to implement Fixie agents in any programming language, as long as the agent code conforms to the following protocol.</p>
<p>A Fixie agent is a program that accepts HTTP requests of two types:</p>
<ul>
<li>An HTTP <code>GET</code> request to the <code>/</code> endpoint, which returns a list of few-shot examples that the agent supports.</li>
<li>An HTTP <code>POST</code> request to the <code>/FUNC</code> endpoint, which returns the result of calling the function <code>FUNC</code> with the parameters specified in the request. Agents can support multiple functions.</li>
</ul>
<h2 id="few-shot-examples">Few-shot examples</h2>
<p>Upon receiving an HTTP <code>GET</code> request to the <code>/</code> endpoint, the agent must return a list of few-shot examples that it supports. The few-shot examples are used to provide examples to the underlying Large Language Model, such as GPT-4, as well as to provide the Fixie Platform information on what kinds of queries this agent can support.</p>
<p>The few-shot examples are returned as a JSON object with the following format:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;base_prompt&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The base prompt for the few-shot examples.&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;few_shots&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;The first few-shot example.&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;The second few-shot example.&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;The third few-shot example.&quot;</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>

<p>Each few-shot example consists of one or more lines, separated by a newline character (<code>\n</code>). The first line of each example must be a sample query, which must start with the prefix <code>Q:</code>. The final line of the few-shot example must be the corresponding answer, which must start with the prefix <code>A:</code>. The few-shot example may contain any number of lines in between the query and answer, representing intermediate outputs from the Large Language Model and responses to the LLM from external functions.</p>
<p>Here a single few-shot example:</p>
<div class="highlight"><pre><span></span><code><span class="nl">Q</span><span class="p">:</span><span class="w"> </span><span class="n">Generate</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">random</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="ow">between</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="mf">19.</span>
<span class="n">Ask</span><span class="w"> </span><span class="n">Func</span><span class="o">[</span><span class="n">genrand</span><span class="o">]</span><span class="err">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">19</span>
<span class="n">Func</span><span class="o">[</span><span class="n">genrand</span><span class="o">]</span><span class="w"> </span><span class="nl">says</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span>
<span class="nl">A</span><span class="p">:</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">random</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="mf">17.</span>
</code></pre></div>

<p>In this example, the first line represents a sample query that the agent can support. The second line is the LLM's response to receiving this query, which in this case indicates that the Function <code>genrand</code> should be invoked with the input string <code>0, 19</code>. The third line is the expected response from the Function <code>genrand</code>, and the final line is the answer to the query.</p>
<p>Using the Fixie Python SDK, the values of the <code>base_prompt</code> and <code>few_shots</code> fields are specified by setting the values of the <code>BASE_PROMPT</code> and <code>FEW_SHOTS</code> variables in the agent code, respectively.</p>
<h2 id="function-invocation">Function invocation</h2>
<p>Upon receiving an HTTP <code>POST</code> request to the <code>/FUNC</code> endpoint, the agent must return the result of calling the agent function <code>FUNC</code> with the parameters specified in the body of the HTTP POST request.</p>
<p>The body of the POST request will be in the following format:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;text&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Argument to function call&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>The agent should invoke the function <code>FUNC</code>, passing in the contents of the JSON object <code>message</code> as the argument to the function call. The result of the function call should be returned as the value of the <code>result</code> field in the response to the HTTP POST request.</p>
<p>The response to the HTTP <code>POST</code> request should be a JSON object in the format:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;text&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Response to function call&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>Using the Fixie Python SDK, implementing an agent function is done using the <code>@fixieai.CodeShotAgent.register_func</code> decorator. The decorator takes a single argument, which is the function to be registered. The function must take a single argument, which contains the JSON <code>message</code> object from the HTTP POST request. The function should return a string, which will be the value of the <code>text</code> field in the response message returned by the agent.</p>
<p>See <a href="../python-agent-api/">python-agent-api.md</a> for more information on the Fixie Python agent API, and <a href="../agent-quickstart/">agent-quickstart.md</a> for a quickstart guide on how to implement agents in Fixie.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../agents/" class="btn btn-neutral float-left" title="Fixie Agent API"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../document-qa/" class="btn btn-neutral float-right" title="Document Question and Answering">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>Copyright (c) 2023 Fixie.ai, Inc.</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../agents/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../document-qa/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
